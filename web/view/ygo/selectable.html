<script>
var Selectable = function(scene) {
    this.scene = scene
    this.selec = {}
    this.func = null
    this.subm = {}

}

Selectable.prototype.register = function(func) {
    this.func = func;
}

Selectable.prototype.submit = function(uniq, name, index) {
    console.dir(name)
    if (name instanceof Array) {
        for (var i = 0; i != name.length; i++) {
            this.submit(uniq, name[i], i)
        }
        for (var j in this.subm) {
            var b = true;
            for (var i = 0; i != name.length; i++) {
                if (j == name[i]) {
                    b = false;
                    break;
                }
            }
            if (b) {
                Translate(this.subm[j].object, {
                    x: 0,
                    y: 0,
                    z: 4000
                }, 1000);
            }
        }
        return
    } else if (this.subm[name] == null) {
        this.subm[name] = new Element(this.scene);

    }
    if (index == null) {
        index = 0
    }
    var info
    if (name == 4) {
        info = "召唤"
    } else if (name == 8) {
        info = "覆盖"
    } else if (name == 16) {
        info = "使用"
    }
    this.subm[name].element.innerHTML = '<button type="submit" class="btn btn-primary btn-block" onclick="WsSelectable(' + uniq + ',' + name + ');selectable.unsubmit()"><h2>' + info + '</h2></button>';

    var tmp = this.scene.AllCard[uniq].object.position
    Translate(this.subm[name].object, {
        x: tmp.x - 60 + (index % 2) * 100,
        y: tmp.y + 220 + Math.floor(index / 2) * 100,
        z: tmp.z + 30
    }, 1000)
}

Selectable.prototype.unsubmit = function() {
    for (var i in this.subm) {
        Translate(this.subm[i].object, {
            x: 0,
            y: 0,
            z: 4000
        }, 1000)
    }
}

Selectable.prototype.click = function(uniq) {
    if (this.selec[uniq] == true) {
        delete(this.selec[uniq])
        this.scene.AllCard[uniq].Unselectable()
    } else {
        this.selec[uniq] = true
        this.scene.AllCard[uniq].Selectable()
    }
    if(this.func){
        this.func(uniq)
    }
}

Selectable.prototype.removeall = function() {
    for (var i in this.selec) {
        if (this.selec[i] == true) {
            this.scene.AllCard[i].Unselectable()
            delete(this.selec[i])
        }
    }
}
</script>
