<!DOCTYPE html>
<!-- saved from url=(0030)https://github.com/jinzhu/gorm -->
<html lang="en" class=""><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    
    
    <title>jinzhu/gorm</title>
    <link rel="search" type="application/opensearchdescription+xml" href="https://github.com/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" sizes="57x57" href="https://github.com/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://github.com/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://github.com/apple-touch-icon-144.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://github.com/apple-touch-icon-144.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="jinzhu/gorm" name="twitter:title"><meta content="gorm - The fantastic ORM library for Golang, aims to be developer friendly" name="twitter:description"><meta content="https://avatars2.githubusercontent.com/u/6843?v=3&amp;s=400" name="twitter:image:src">
<meta content="GitHub" property="og:site_name"><meta content="object" property="og:type"><meta content="https://avatars2.githubusercontent.com/u/6843?v=3&amp;s=400" property="og:image"><meta content="jinzhu/gorm" property="og:title"><meta content="https://github.com/jinzhu/gorm" property="og:url"><meta content="gorm - The fantastic ORM library for Golang, aims to be developer friendly" property="og:description">

      <meta name="browser-stats-url" content="/_stats">
    <link rel="assets" href="https://assets-cdn.github.com/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035/">
    <link rel="xhr-socket" href="https://github.com/_sockets">
    <meta name="pjax-timeout" content="1000">
    <link rel="sudo-modal" href="https://github.com/sessions/sudo_modal">

    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="repo_source" data-pjax-transient="">
      <meta name="google-analytics" content="UA-3769691-2">

    <meta content="collector.githubapp.com" name="octolytics-host"><meta content="collector-cdn.github.com" name="octolytics-script-host"><meta content="github" name="octolytics-app-id"><meta content="7AEF1782:54F0:33D3B7C:54B67776" name="octolytics-dimension-request_id"><meta content="6565744" name="octolytics-actor-id"><meta content="wzshiming" name="octolytics-actor-login"><meta content="a179ece5a44afc442abc422da81072062e1c6b363b767b07c7ef4e0678dee8ac" name="octolytics-actor-hash">
    
    <meta content="Rails, view, files#disambiguate" name="analytics-event">

    
    
    <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">


    <meta content="authenticity_token" name="csrf-param">
<style type="text/css"></style><meta content="TuCP8AwWzZAqevmH520dMOZiaz7QJ0AWp+yIWpxQTSKSvR3X6Zm79L9EF8CkORZGWghIKSOQ9e65bn/AuvGPnQ==" name="csrf-token">

    <link href="./jinzhu gorm_files/github-1e9b75e41346c98d95c9040e46472201ca0921fa529b8f6461a07eea77ba7921.css" media="all" rel="stylesheet" type="text/css">
    <link href="./jinzhu gorm_files/github2-400d44bfa61f24ddc10d478b3315a61877a6382668dd6f1c09190ca374a608ff.css" media="all" rel="stylesheet" type="text/css">
    
    


    <meta http-equiv="x-pjax-version" content="df56b2b2c0fffabab387fadb4a240e83">

      
  <meta name="description" content="gorm - The fantastic ORM library for Golang, aims to be developer friendly">
  <meta name="go-import" content="github.com/jinzhu/gorm git https://github.com/jinzhu/gorm.git">

  <meta content="6843" name="octolytics-dimension-user_id"><meta content="jinzhu" name="octolytics-dimension-user_login"><meta content="13855476" name="octolytics-dimension-repository_id"><meta content="jinzhu/gorm" name="octolytics-dimension-repository_nwo"><meta content="true" name="octolytics-dimension-repository_public"><meta content="false" name="octolytics-dimension-repository_is_fork"><meta content="13855476" name="octolytics-dimension-repository_network_root_id"><meta content="jinzhu/gorm" name="octolytics-dimension-repository_network_root_nwo">
  <link href="https://github.com/jinzhu/gorm/commits/master.atom" rel="alternate" title="Recent Commits to gorm:master" type="application/atom+xml">

  <script type="text/javascript" async="" src="./jinzhu gorm_files/api.js"></script></head>


  <body class="logged_in  env-production windows vis-public">
    <a href="https://github.com/jinzhu/gorm#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      
      


      <div class="header header-logged-in true" role="banner">
  <div class="container clearfix">

    <a class="header-logo-invertocat" href="https://github.com/" data-hotkey="g d" aria-label="Homepage" ga-data-click="Header, go to dashboard, icon:logo">
  <span class="mega-octicon octicon-mark-github"></span>
</a>


      <div class="site-search repo-scope js-site-search" role="search">
          <form accept-charset="UTF-8" action="https://github.com/jinzhu/gorm/search" class="js-site-search-form" data-global-search-url="/search" data-repo-search-url="/jinzhu/gorm/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <input type="text" class="js-site-search-field is-clearable" data-hotkey="s" name="q" placeholder="Search" data-global-scope-placeholder="Search GitHub" data-repo-scope-placeholder="Search" tabindex="1" autocapitalize="off">
  <div class="scope-badge">This repository</div>
</form>
      </div>
      <ul class="header-nav left" role="navigation">
        <li class="header-nav-item explore">
          <a class="header-nav-link" href="https://github.com/explore" data-ga-click="Header, go to explore, text:explore">Explore</a>
        </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://gist.github.com/" data-ga-click="Header, go to gist, text:gist">Gist</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://github.com/blog" data-ga-click="Header, go to blog, text:blog">Blog</a>
          </li>
        <li class="header-nav-item">
          <a class="header-nav-link" href="https://help.github.com/" data-ga-click="Header, go to help, text:help">Help</a>
        </li>
      </ul>

    
<ul class="header-nav user-nav right" id="user-links">
  <li class="header-nav-item dropdown js-menu-container">
    <a class="header-nav-link name" href="https://github.com/wzshiming" data-ga-click="Header, go to profile, text:username">
      <img alt="wzshiming" class="avatar" data-user="6565744" height="20" src="./jinzhu gorm_files/6565744" width="20">
      <span class="css-truncate">
        <span class="css-truncate-target">wzshiming</span>
      </span>
    </a>
  </li>

  <li class="header-nav-item dropdown js-menu-container">
    <a class="header-nav-link js-menu-target tooltipped tooltipped-s" href="https://github.com/jinzhu/gorm#" aria-label="Create new..." data-ga-click="Header, create new, icon:add">
      <span class="octicon octicon-plus"></span>
      <span class="dropdown-caret"></span>
    </a>

    <div class="dropdown-menu-content js-menu-content">
      
<ul class="dropdown-menu">
  <li>
    <a href="https://github.com/new" data-ga-click="Header, create new repository, icon:repo"><span class="octicon octicon-repo"></span> New repository</a>
  </li>
  <li>
    <a href="https://github.com/organizations/new" data-ga-click="Header, create new organization, icon:organization"><span class="octicon octicon-organization"></span> New organization</a>
  </li>


    <li class="dropdown-divider"></li>
    <li class="dropdown-header">
      <span title="jinzhu/gorm">This repository</span>
    </li>
      <li>
        <a href="https://github.com/jinzhu/gorm/issues/new" data-ga-click="Header, create new issue, icon:issue"><span class="octicon octicon-issue-opened"></span> New issue</a>
      </li>
</ul>

    </div>
  </li>

  <li class="header-nav-item">
        <a href="https://github.com/notifications" aria-label="You have no unread notifications" class="header-nav-link notification-indicator tooltipped tooltipped-s" data-ga-click="Header, go to notifications, icon:read" data-hotkey="g n">
        <span class="mail-status all-read"></span>
        <span class="octicon octicon-inbox"></span>
</a>
  </li>

  <li class="header-nav-item">
    <a class="header-nav-link tooltipped tooltipped-s" href="https://github.com/settings/profile" id="account_settings" aria-label="Settings" data-ga-click="Header, go to settings, icon:settings">
      <span class="octicon octicon-gear"></span>
    </a>
  </li>

  <li class="header-nav-item">
    <form accept-charset="UTF-8" action="https://github.com/logout" class="logout-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="pIqMNxGKs4ZEhu8nYYzZM1Rhcs7W7Yb3hPYqzCjGGqB0Mf82dxxbQ9ba52rxOKfmFH6Oylg5x/Y4A7Mz45KfDQ=="></div>
      <button class="header-nav-link sign-out-button tooltipped tooltipped-s" aria-label="Sign out" data-ga-click="Header, sign out, icon:logout">
        <span class="octicon octicon-sign-out"></span>
      </button>
</form>  </li>

</ul>


    
  </div>
</div>

      

        
<div class="flash-global js-notice flash-warn">
<div class="container">
    <h2>
      You don't have any verified emails.  We recommend <a href="https://github.com/settings/emails">verifying</a> at least one email.
    </h2>
    <p>
Email verification helps our support team verify ownership if you lose account access and allows you to receive all the notifications you ask for.
    </p>


















</div>
</div>


      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope="" itemtype="http://schema.org/WebPage">
    <div id="js-flash-container">
      
    </div>
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        
<ul class="pagehead-actions">

    <li class="subscription">
      <form accept-charset="UTF-8" action="https://github.com/notifications/subscribe" class="js-social-container" data-autosubmit="true" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="9RX8ueDAKiraaK5PSPsPvJxV6+xx8ru30ZrMGfadESLuJLH27+0vMaX86Yopamiw3DRopVBis8d1l9gdXMk49g=="></div>  <input id="repository_id" name="repository_id" type="hidden" value="13855476">

    <div class="select-menu js-menu-container js-select-menu">
      <a class="social-count js-social-count" href="https://github.com/jinzhu/gorm/watchers">
        68
      </a>
      <a href="https://github.com/jinzhu/gorm/subscription" class="minibutton select-menu-button with-count js-menu-target" role="button" tabindex="0" aria-haspopup="true">
        <span class="js-select-button">
          <span class="octicon octicon-eye"></span>
          Watch
        </span>
      </a>

      <div class="select-menu-modal-holder">
        <div class="select-menu-modal subscription-menu-modal js-menu-content" aria-hidden="true">
          <div class="select-menu-header">
            <span class="select-menu-title">Notifications</span>
            <span class="octicon octicon-x js-menu-close" role="button" aria-label="Close"></span>
          </div> <!-- /.select-menu-header -->

          <div class="select-menu-list js-navigation-container" role="menu">

            <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input checked="checked" id="do_included" name="do" type="radio" value="included">
                <h4>Not watching</h4>
                <span class="description">Be notified when participating or @mentioned.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-eye"></span>
                  Watch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input id="do_subscribed" name="do" type="radio" value="subscribed">
                <h4>Watching</h4>
                <span class="description">Be notified of all conversations.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-eye"></span>
                  Unwatch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input id="do_ignore" name="do" type="radio" value="ignore">
                <h4>Ignoring</h4>
                <span class="description">Never be notified.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-mute"></span>
                  Stop ignoring
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

          </div> <!-- /.select-menu-list -->

        </div> <!-- /.select-menu-modal -->
      </div> <!-- /.select-menu-modal-holder -->
    </div> <!-- /.select-menu -->

</form>
    </li>

  <li>
    
  <div class="js-toggler-container js-social-container starring-container ">

    <form accept-charset="UTF-8" action="https://github.com/jinzhu/gorm/unstar" class="js-toggler-form starred js-unstar-button" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="IdKeE1Vy8jM04WSGc9QLLU/Lsk4bARPUvK4odC0JHfsWGsjmXR3MPc1CeG7rxTeKI2jEGmBN6rE8MTurpmPb/g=="></div>
      <button class="minibutton with-count js-toggler-target star-button" aria-label="Unstar this repository" title="Unstar jinzhu/gorm">
        <span class="octicon octicon-star"></span>
        Unstar
      </button>
        <a class="social-count js-social-count" href="https://github.com/jinzhu/gorm/stargazers">
          1,291
        </a>
</form>
    <form accept-charset="UTF-8" action="https://github.com/jinzhu/gorm/star" class="js-toggler-form unstarred js-star-button" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="5wMuytoLI9ePtaENaUd5HFciEQ4/1SdXzTonRxJLOuuk1iGQn6RNfRHQgMIs2t+E9pydI+tPFArTieTMdsGWqw=="></div>
      <button class="minibutton with-count js-toggler-target star-button" aria-label="Star this repository" title="Star jinzhu/gorm">
        <span class="octicon octicon-star"></span>
        Star
      </button>
        <a class="social-count js-social-count" href="https://github.com/jinzhu/gorm/stargazers">
          1,291
        </a>
</form>  </div>

  </li>


        <li>
          <a href="https://github.com/jinzhu/gorm/fork" class="minibutton with-count js-toggler-target fork-button tooltipped-n" title="Fork your own copy of jinzhu/gorm to your account" aria-label="Fork your own copy of jinzhu/gorm to your account" rel="nofollow" data-method="post">
            <span class="octicon octicon-repo-forked"></span>
            Fork
          </a>
          <a href="https://github.com/jinzhu/gorm/network" class="social-count">134</a>
        </li>

</ul>

        <h1 itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="mega-octicon octicon-repo"></span>
          <span class="author"><a href="https://github.com/jinzhu" class="url fn" itemprop="url" rel="author"><span itemprop="title">jinzhu</span></a></span><!--
       --><span class="path-divider">/</span><!--
       --><strong><a href="./jinzhu gorm_files/jinzhu gorm.html" class="js-current-repository" data-pjax="#js-repo-pjax-container">gorm</a></strong>

          <span class="page-context-loader">
            <img alt="" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline with-full-navigation">
        <div class="repository-sidebar clearfix">
            
<nav class="sunken-menu repo-nav js-repo-nav js-sidenav-container-pjax js-octicon-loaders" role="navigation" data-pjax="#js-repo-pjax-container" data-issue-count-url="/jinzhu/gorm/issues/counts">
  <ul class="sunken-menu-group">
    <li class="tooltipped tooltipped-w" aria-label="Code">
      <a href="./jinzhu gorm_files/jinzhu gorm.html" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /jinzhu/gorm">
        <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
        <img alt="" class="mini-loader" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Issues">
        <a href="https://github.com/jinzhu/gorm/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /jinzhu/gorm/issues">
          <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
          <span class="counter">34</span>

          <img alt="" class="mini-loader" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
</a>      </li>

    <li class="tooltipped tooltipped-w" aria-label="Pull Requests">
      <a href="https://github.com/jinzhu/gorm/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g p" data-selected-links="repo_pulls /jinzhu/gorm/pulls">
          <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
          <span class="counter">0</span>

          <img alt="" class="mini-loader" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
</a>    </li>


      <li class="tooltipped tooltipped-w" aria-label="Wiki">
        <a href="https://github.com/jinzhu/gorm/wiki" aria-label="Wiki" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g w" data-selected-links="repo_wiki /jinzhu/gorm/wiki">
          <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
          <img alt="" class="mini-loader" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
</a>      </li>
  </ul>
  <div class="sunken-menu-separator"></div>
  <ul class="sunken-menu-group">

    <li class="tooltipped tooltipped-w" aria-label="Pulse">
      <a href="https://github.com/jinzhu/gorm/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-selected-links="pulse /jinzhu/gorm/pulse">
        <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
        <img alt="" class="mini-loader" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
</a>    </li>

    <li class="tooltipped tooltipped-w" aria-label="Graphs">
      <a href="https://github.com/jinzhu/gorm/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-selected-links="repo_graphs repo_contributors /jinzhu/gorm/graphs">
        <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
        <img alt="" class="mini-loader" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
</a>    </li>
  </ul>


</nav>

              <div class="only-with-full-nav">
                
  
<div class="clone-url open" data-protocol-type="http" data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><span class="text-emphasized">HTTPS</span> clone URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target" value="https://github.com/jinzhu/gorm.git" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  
<div class="clone-url " data-protocol-type="ssh" data-url="/users/set_protocol?protocol_selector=ssh&amp;protocol_type=clone">
  <h3><span class="text-emphasized">SSH</span> clone URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target" value="git@github.com:jinzhu/gorm.git" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  
<div class="clone-url " data-protocol-type="subversion" data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><span class="text-emphasized">Subversion</span> checkout URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target" value="https://github.com/jinzhu/gorm" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>



<p class="clone-options">You can clone with
  <a href="https://github.com/jinzhu/gorm#" class="js-clone-selector" data-protocol="http">HTTPS</a>, <a href="https://github.com/jinzhu/gorm#" class="js-clone-selector" data-protocol="ssh">SSH</a>, or <a href="https://github.com/jinzhu/gorm#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <a href="https://help.github.com/articles/which-remote-url-should-i-use" class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <span class="octicon octicon-question"></span>
  </a>
</p>


  <a href="http://windows.github.com/" class="minibutton sidebar-button" title="Save jinzhu/gorm to your computer and use it in GitHub Desktop." aria-label="Save jinzhu/gorm to your computer and use it in GitHub Desktop.">
    <span class="octicon octicon-device-desktop"></span>
    Clone in Desktop
  </a>

                <a href="https://github.com/jinzhu/gorm/archive/master.zip" class="minibutton sidebar-button" aria-label="Download the contents of jinzhu/gorm as a zip file" title="Download the contents of jinzhu/gorm as a zip file" rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container="">
          
<span id="js-show-full-navigation"></span>

<div class="repository-meta js-details-container ">
    <div class="repository-description">
      The fantastic ORM library for Golang, aims to be developer friendly
    </div>



</div>

<div class="overall-summary overall-summary-bottomless">

  <div class="stats-switcher-viewport js-stats-switcher-viewport">
    <div class="stats-switcher-wrapper">
    <ul class="numbers-summary">
      <li class="commits">
        <a data-pjax="" href="https://github.com/jinzhu/gorm/commits/master">
            <span class="octicon octicon-history"></span>
            <span class="num text-emphasized">
              550
            </span>
            commits
        </a>
      </li>
      <li>
        <a data-pjax="" href="https://github.com/jinzhu/gorm/branches">
          <span class="octicon octicon-git-branch"></span>
          <span class="num text-emphasized">
            5
          </span>
          branches
        </a>
      </li>

      <li>
        <a data-pjax="" href="https://github.com/jinzhu/gorm/releases">
          <span class="octicon octicon-tag"></span>
          <span class="num text-emphasized">
            0
          </span>
          releases
        </a>
      </li>

      <li>
        
  <a href="https://github.com/jinzhu/gorm/graphs/contributors">
    <span class="octicon octicon-organization"></span>
    <span class="num text-emphasized">
      30
    </span>
    contributors
  </a>
      </li>
    </ul>

      <div class="repository-lang-stats">
        <ol class="repository-lang-stats-numbers">
          <li>
              <a href="https://github.com/jinzhu/gorm/search?l=go">
                <span class="color-block language-color" style="background-color:#375eab;"></span>
                <span class="lang">Go</span>
                <span class="percent">99.9%</span>
              </a>
          </li>
          <li>
              <a href="https://github.com/jinzhu/gorm/search?l=bash">
                <span class="color-block language-color" style="background-color:#89e051;"></span>
                <span class="lang">Shell</span>
                <span class="percent">0.1%</span>
              </a>
          </li>
        </ol>
      </div>
    </div>
  </div>

</div>

  <div class="tooltipped tooltipped-s" aria-label="Show language statistics">
    <a href="https://github.com/jinzhu/gorm#" class="repository-lang-stats-graph js-toggle-lang-stats" style="background-color:#89e051">
  <span class="language-color" style="width:99.9%; background-color:#375eab;" itemprop="keywords">Go</span><span class="language-color" style="width:0.1%; background-color:#89e051;" itemprop="keywords">Shell</span>
    </a>
  </div>



<div class="file-navigation in-mid-page">
  <a href="https://github.com/jinzhu/gorm/find/master" class="js-show-file-finder minibutton empty-icon tooltipped tooltipped-s right" data-pjax="" data-hotkey="t" aria-label="Quickly jump between files">
    <span class="octicon octicon-list-unordered"></span>
  </a>
    <a href="https://github.com/jinzhu/gorm/compare" aria-label="Compare, review, create a pull request" class="minibutton primary tooltipped tooltipped-s left compare-button" data-pjax="">
      <span class="octicon octicon-git-compare"></span>
    </a>

  
<div class="select-menu js-menu-container js-select-menu left">
  <span class="minibutton select-menu-button js-menu-target css-truncate" data-hotkey="w" data-master-branch="master" data-ref="master" title="master" role="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true">
    <span class="octicon octicon-git-branch"></span>
    <i>branch:</i>
    <span class="js-select-button css-truncate-target">master</span>
  </span>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="" aria-hidden="true">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <span class="select-menu-title">Switch branches/tags</span>
        <span class="octicon octicon-x js-menu-close" role="button" aria-label="Close"></span>
      </div> <!-- /.select-menu-header -->

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="https://github.com/jinzhu/gorm#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="https://github.com/jinzhu/gorm#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
            </li>
          </ul>
        </div><!-- /.select-menu-tabs -->
      </div><!-- /.select-menu-filters -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/jinzhu/gorm/tree/anonymous_struct" data-name="anonymous_struct" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text css-truncate-target" title="anonymous_struct">anonymous_struct</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/jinzhu/gorm/tree/galeone-default-values" data-name="galeone-default-values" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text css-truncate-target" title="galeone-default-values">galeone-default-values</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/jinzhu/gorm/tree/gh-pages" data-name="gh-pages" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text css-truncate-target" title="gh-pages">gh-pages</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item selected">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/jinzhu/gorm/tree/master" data-name="master" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text css-truncate-target" title="master">master</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/jinzhu/gorm/tree/refactor" data-name="refactor" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text css-truncate-target" title="refactor">refactor</a>
            </div> <!-- /.select-menu-item -->
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

    </div> <!-- /.select-menu-modal -->
  </div> <!-- /.select-menu-modal-holder -->
</div> <!-- /.select-menu -->



  <div class="breadcrumb"><span class="repo-root js-repo-root"><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="./jinzhu gorm_files/jinzhu gorm.html" class="" data-branch="master" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">gorm</span></a></span></span><span class="separator">/</span><form action="https://github.com/jinzhu/gorm/new/master" aria-label="Fork this project and create a new file" class="js-new-blob-form tooltipped tooltipped-e new-file-link" method="post"><span aria-label="Fork this project and create a new file" class="js-new-blob-submit octicon octicon-plus" data-test-id="create-new-git-file" role="button"></span></form></div>
</div>



  
  <div class="commit commit-tease js-details-container">
    <p class="commit-title ">
        <a href="https://github.com/jinzhu/gorm/commit/0d0e8d651d40082d819a5113127eda43919cdeee" class="message" data-pjax="true" title="Merge branch &#39;jaytaylor-postgres-quoting&#39;">Merge branch 'jaytaylor-postgres-quoting'</a>
        
    </p>
    <div class="commit-meta">
      <button aria-label="Copy SHA" class="js-zeroclipboard zeroclipboard-link" data-clipboard-text="0d0e8d651d40082d819a5113127eda43919cdeee" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
      <a href="https://github.com/jinzhu/gorm/commit/0d0e8d651d40082d819a5113127eda43919cdeee" class="sha-block" data-pjax="">latest commit <span class="sha">0d0e8d651d</span></a>

      <div class="authorship">
        <img alt="Jinzhu" class="avatar" data-user="6843" height="20" src="./jinzhu gorm_files/6843" width="20">
        <span class="author-name"><a href="https://github.com/jinzhu" rel="author">jinzhu</a></span>
        authored <time class="updated" datetime="2015-01-13T23:59:29Z" is="relative-time" title="2015年1月14日 GMT+8上午7:59">15 hours ago</time>

      </div>
    </div>
  </div>

  
<div class="file-wrap">

  <table class="files" data-pjax="">


    <tbody>
      <tr class="warning include-fragment-error">
        <td class="icon"><span class="octicon octicon-alert"></span></td>
        <td class="content" colspan="3">Failed to load latest commit information.</td>
      </tr>

        <tr>
          <td class="icon">
            <span class="octicon octicon-file-directory"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/tree/master/doc" class="js-directory-link" id="9a09b4dfda82e3e665e31092d1c3ec8d-6066939c24926e9f577193c54b2efb11cc161c44" title="doc">doc</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/4e90fbf4e87407299b036afeb072db88c0b8edd3" class="message" data-pjax="true" title="gorm: added ability to change the time.now format">gorm: added ability to change the time.now format</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-08-23T08:00:04Z" is="time-ago" title="2014年8月23日 GMT+8下午4:00">5 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-directory"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/tree/master/images" class="js-directory-link" id="59b514174bffe4ae402b3d63aad79fe0-e6ad06b9c61aed0ac33e759682dd8cab6c41b5e8" title="images">images</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/c097a1919c65b7f439ec23bdbb1bd4a892245fe7" class="message" data-pjax="true" title="Document Logger">Document Logger</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2013-11-11T09:50:27Z" is="time-ago" title="2013年11月11日 GMT+8下午5:50">a year ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/License" class="js-directory-link" id="794df3791a8c800841516007427a2aa3-037e1653e69a614af4884c6003750536adf99f33" title="License">License</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/1b4490fd4731b7ba60100458ec2fc00fc461d9dd" class="message" data-pjax="true" title="Add MIT License file">Add MIT License file</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-05T00:59:18Z" is="time-ago" title="2015年1月5日 GMT+8上午8:59">10 days ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/README.md" class="js-directory-link" id="04c6e90faac2675aa89e2176d2eec7d8-3cf2eeefee2076b6e1b965a31b9de01354abe9da" title="README.md">README.md</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/1b4490fd4731b7ba60100458ec2fc00fc461d9dd" class="message" data-pjax="true" title="Add MIT License file">Add MIT License file</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-05T00:59:18Z" is="time-ago" title="2015年1月5日 GMT+8上午8:59">10 days ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/anonymous_struct_test.go" class="js-directory-link" id="1fe3de4af3c774926d9347f340b07816-fe571869fce9c79b0649d77021ef5a24070066bf" title="anonymous_struct_test.go">anonymous_struct_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/c6b1669c6af213ca8cc573bce69f59351ef78bfb" class="message" data-pjax="true" title="Fix tests for Scanner">Fix tests for Scanner</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-08-30T15:14:14Z" is="time-ago" title="2014年8月30日 GMT+8下午11:14">5 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/association.go" class="js-directory-link" id="236d266f5c6b52288587cac28e8ae47d-69be0d010874aec9538d977ee76d94f00cacd345" title="association.go">association.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/8b451f00841230e56e0f0497b6e2ff7448f896e4" class="message" data-pjax="true" title="Add support for polymorphic relationships using the POLYMORPHIC setting.

This commit adds support for two settings:

FOREIGNTYPE - A field that is used to store the type of the owner.

POLYMORPHIC - A shortcut to set FOREIGNKEY and FOREIGNTYPE to the same
value suffixed by &quot;Id&quot; and &quot;Type&quot; respectively.

The type is stored as the table name, which I thought might be useful
for other queries.

The biggest gotcha of this commit is that I flipped the definition of
has_one and belongs_to. gorm is very flexible such that it didn&#39;t
really care if it was a has_one or belongs_to, and can pretty much
determine it at runtime. For the sake of the error, I had to define
one of them as belongs_to, and I chose the one with the fields as
the belongs_to, like ActiveRecord. The error could probably be
genericized to &quot;gorm cannot determine type&quot;, but I think it&#39;s nicer
to tell people DONT DO PATTERN XYZ CAUSE IT WONT WORK. Functionally,
it doesn&#39;t matter.">Add support for polymorphic relationships using the POLYMORPHIC setting.</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-26T05:35:47Z" is="time-ago" title="2014年11月26日 GMT+8下午1:35">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/association_test.go" class="js-directory-link" id="304fa4abe7caf97bc0ddf559d3f3c149-a09ab31d53bd726be18bb50a1971bd233887c4f3" title="association_test.go">association_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/1de020dc4d7f7d1acbd17e22d4bc5846848733e0" class="message" data-pjax="true" title="Add test for polymorphic associations.">Add test for polymorphic associations.</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-26T05:27:08Z" is="time-ago" title="2014年11月26日 GMT+8下午1:27">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/callback.go" class="js-directory-link" id="6a4cdb31ba172474c25dc7609d662f39-979fc6eb3ff41d8c3fc65ceb040e687d0de419a4" title="callback.go">callback.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/58ff12421092878c767c2a601dcb44ef95977fcb" class="message" data-pjax="true" title="Fix messages for remove, replace callbacks">Fix messages for remove, replace callbacks</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-09-02T12:13:00Z" is="time-ago" title="2014年9月2日 GMT+8下午8:13">4 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/callback_create.go" class="js-directory-link" id="280eb284159c4b744a2e8ca7e60ffde8-52e9369ccb3ffd026eabe1d370afc942a58065da" title="callback_create.go">callback_create.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/aa8bc02c115c07dc967cd38f23d67c5ae0d84460" class="message" data-pjax="true" title="Fix broken test for postgres">Fix broken test for postgres</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-13T23:59:21Z" is="time-ago" title="2015年1月14日 GMT+8上午7:59">15 hours ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/callback_delete.go" class="js-directory-link" id="deff03a0a050fc767900fea13987428f-c58a21fab18875cc02810093b0ca1ea7d6ce15d7" title="callback_delete.go">callback_delete.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/4e90fbf4e87407299b036afeb072db88c0b8edd3" class="message" data-pjax="true" title="gorm: added ability to change the time.now format">gorm: added ability to change the time.now format</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-08-23T08:00:04Z" is="time-ago" title="2014年8月23日 GMT+8下午4:00">5 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/callback_query.go" class="js-directory-link" id="f66d859193e052cd2460e67ddc1f49e3-81b191e71aa7340363a1483e74a8a4bbef90b7b6" title="callback_query.go">callback_query.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/0219fb1cc033bda7ed78c90ed933fb3ecdb6f46f" class="message" data-pjax="true" title="Don&#39;t raise error if no record found when find all">Don't raise error if no record found when find all</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-19T03:50:34Z" is="time-ago" title="2014年12月19日 GMT+8上午11:50">26 days ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/callback_shared.go" class="js-directory-link" id="a68c3b7ad7f3631f842e6d45874c32cb-3d8a245cfd8500a96b79a067d529b091246fb4d7" title="callback_shared.go">callback_shared.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/cbcb88d3d1047d49cf054836d987a83bc29653ce" class="message" data-pjax="true" title="Fix set ForeignKey for embedded struct">Fix set ForeignKey for embedded struct</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-04T03:44:00Z" is="time-ago" title="2014年12月4日 GMT+8上午11:44">a month ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/callback_test.go" class="js-directory-link" id="c497ec14db6f85762504acdf8beb4a15-fb8145561b48b56e939a633ee339fad56b88a386" title="callback_test.go">callback_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/0ed805099e202c735d4b907bf62eea7f14b1844f" class="message" data-pjax="true" title="Fix register callbacks in some cases">Fix register callbacks in some cases</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-08-27T08:10:33Z" is="time-ago" title="2014年8月27日 GMT+8下午4:10">5 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/callback_update.go" class="js-directory-link" id="cf054dc835e56d967cd8a608a239ad98-0e32352fa5f5bbc0533e67cee658b356185d81c0" title="callback_update.go">callback_update.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/75819b2bb320ae039297e4bfee2c9bdfd019a7bd" class="message" data-pjax="true" title="Refactor DefaultValue">Refactor DefaultValue</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-17T09:38:32Z" is="time-ago" title="2014年11月17日 GMT+8下午5:38">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/callbacks_test.go" class="js-directory-link" id="c069c85434d742f910f33647ec3e2d4a-a58913d767de1532f4196e422e6729f90b52f83d" title="callbacks_test.go">callbacks_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/423d9496c15ece5ce69e5d5d594429dfc31da8e0" class="message" data-pjax="true" title="update tests">update tests</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-08-28T08:14:44Z" is="time-ago" title="2014年8月28日 GMT+8下午4:14">5 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/common_dialect.go" class="js-directory-link" id="969592e0859619e10bb03f73628d8fe1-11e0087699d0f6e3db436966b9c606131b42cd43" title="common_dialect.go">common_dialect.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/21f4de584f1cd93b15bf2ed498e861933ff37ff4" class="message" data-pjax="true" title="Use tableName.field or tableName.* in returning string">Use tableName.field or tableName.* in returning string</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-08T11:03:42Z" is="time-ago" title="2014年12月8日 GMT+8下午7:03">a month ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/create_test.go" class="js-directory-link" id="3767182feeac2e08b0a8a8ef472a44ed-a5b46630ccb1779583f7d36ee4f86be1a773829a" title="create_test.go">create_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/0fa1335555f40164b4da8c0d888e48863f18ad65" class="message" data-pjax="true" title="Avoid Errors in postgres when creating a row without a GORM defined primary key (but defined db-side)">Avoid Errors in postgres when creating a row without a GORM defined p…</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-08T10:33:30Z" is="time-ago" title="2014年12月8日 GMT+8下午6:33">a month ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/customize_column_test.go" class="js-directory-link" id="6f7c8d66d617ce3eae88fe8511f45bcd-aec3f39e0ec9792d338a0aeff1848411e2381074" title="customize_column_test.go">customize_column_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/828bf5d5fd9f24a045b6e5e9ed0429cf3d81f387" class="message" data-pjax="true" title="Fix can&#39;t update record with customized primary key">Fix can't update record with customized primary key</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-12T02:09:06Z" is="time-ago" title="2014年11月12日 GMT+8上午10:09">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/delete_test.go" class="js-directory-link" id="f250dca3932924289baaabd2d90a72c9-74224a757b3280c5585f4b7d79dc618c5bca294c" title="delete_test.go">delete_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/423d9496c15ece5ce69e5d5d594429dfc31da8e0" class="message" data-pjax="true" title="update tests">update tests</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-08-28T08:14:44Z" is="time-ago" title="2014年8月28日 GMT+8下午4:14">5 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/dialect.go" class="js-directory-link" id="2d042abdad5dadd80ed4106b5fe61fb9-42b5c742e23967441bc21318b00b05e9f576b72e" title="dialect.go">dialect.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/21f4de584f1cd93b15bf2ed498e861933ff37ff4" class="message" data-pjax="true" title="Use tableName.field or tableName.* in returning string">Use tableName.field or tableName.* in returning string</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-08T11:03:42Z" is="time-ago" title="2014年12月8日 GMT+8下午7:03">a month ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/errors.go" class="js-directory-link" id="dd25e0e0a594c3f3592c1c717039b85e-d91fbeb502b53636605ea7c433784ac76b6be5b4" title="errors.go">errors.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/0ad707b410d435f1271121370ed49b70fdab0fa5" class="message" data-pjax="true" title="Yay, all tests passed">Yay, all tests passed</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2013-11-16T10:42:47Z" is="time-ago" title="2013年11月16日 GMT+8下午6:42">a year ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/field.go" class="js-directory-link" id="ba82166caeaaa503df171d6436c92c33-af278e44ed4ed1ecae4d954a4fd66ddbbb7a9857" title="field.go">field.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/8b451f00841230e56e0f0497b6e2ff7448f896e4" class="message" data-pjax="true" title="Add support for polymorphic relationships using the POLYMORPHIC setting.

This commit adds support for two settings:

FOREIGNTYPE - A field that is used to store the type of the owner.

POLYMORPHIC - A shortcut to set FOREIGNKEY and FOREIGNTYPE to the same
value suffixed by &quot;Id&quot; and &quot;Type&quot; respectively.

The type is stored as the table name, which I thought might be useful
for other queries.

The biggest gotcha of this commit is that I flipped the definition of
has_one and belongs_to. gorm is very flexible such that it didn&#39;t
really care if it was a has_one or belongs_to, and can pretty much
determine it at runtime. For the sake of the error, I had to define
one of them as belongs_to, and I chose the one with the fields as
the belongs_to, like ActiveRecord. The error could probably be
genericized to &quot;gorm cannot determine type&quot;, but I think it&#39;s nicer
to tell people DONT DO PATTERN XYZ CAUSE IT WONT WORK. Functionally,
it doesn&#39;t matter.">Add support for polymorphic relationships using the POLYMORPHIC setting.</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-26T05:35:47Z" is="time-ago" title="2014年11月26日 GMT+8下午1:35">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/interface.go" class="js-directory-link" id="e2cd38f38509c9033189fbf0317e414e-7b02aa664418dc55297f6d9251a1bf65d7852431" title="interface.go">interface.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/15583e60171ec9e971205576c2afe8fb04cf7d3b" class="message" data-pjax="true" title="rename some files">rename some files</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-01-28T08:29:42Z" is="time-ago" title="2014年1月28日 GMT+8下午4:29">a year ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/logger.go" class="js-directory-link" id="40646a6e1108f49d452915ba3515c206-001b2165c0eb5b0c211fc5228e3af5a0a7c82ccd" title="logger.go">logger.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/4e90fbf4e87407299b036afeb072db88c0b8edd3" class="message" data-pjax="true" title="gorm: added ability to change the time.now format">gorm: added ability to change the time.now format</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-08-23T08:00:04Z" is="time-ago" title="2014年8月23日 GMT+8下午4:00">5 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/main.go" class="js-directory-link" id="7ddfb3e035b42cd70649cc33393fe32c-3fd42ff2e3d816ff8248dfd5e3949875e242eafa" title="main.go">main.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/3500dfa1b613500a01a4798d8d17fb4d13d90ad4" class="message" data-pjax="true" title="expose db.New as API">expose db.New as API</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-06T07:11:41Z" is="time-ago" title="2015年1月6日 GMT+8下午3:11">8 days ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/main_private.go" class="js-directory-link" id="06c423c852f60613df3554a2b86f4105-6dd5c00b0d9e9d4a2a6f584bacf0d11da8193457" title="main_private.go">main_private.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/3500dfa1b613500a01a4798d8d17fb4d13d90ad4" class="message" data-pjax="true" title="expose db.New as API">expose db.New as API</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-06T07:11:41Z" is="time-ago" title="2015年1月6日 GMT+8下午3:11">8 days ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/main_test.go" class="js-directory-link" id="53618cae32e23ae47e1c35f10da92654-0b6f2d7a28a8af9df5498316cef6229a5b981d70" title="main_test.go">main_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/a4e0ef6509b42be2360e339da12c8aaaf94aac12" class="message" data-pjax="true" title="Refactor reuse existing database connection">Refactor reuse existing database connection</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-25T07:21:28Z" is="time-ago" title="2014年11月25日 GMT+8下午3:21">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/migration_test.go" class="js-directory-link" id="26b0747678676a2b7f3780332fcc640e-1a7ae6f2578f3764a2ea98bc137f84ab55fdd3d8" title="migration_test.go">migration_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/0fa1335555f40164b4da8c0d888e48863f18ad65" class="message" data-pjax="true" title="Avoid Errors in postgres when creating a row without a GORM defined primary key (but defined db-side)">Avoid Errors in postgres when creating a row without a GORM defined p…</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-08T10:33:30Z" is="time-ago" title="2014年12月8日 GMT+8下午6:33">a month ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/mssql.go" class="js-directory-link" id="b89af7afe3485246db5917fa31861dc3-9317c1e79c233ac6fcdf288192ac8c7ebafbf124" title="mssql.go">mssql.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/21f4de584f1cd93b15bf2ed498e861933ff37ff4" class="message" data-pjax="true" title="Use tableName.field or tableName.* in returning string">Use tableName.field or tableName.* in returning string</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-08T11:03:42Z" is="time-ago" title="2014年12月8日 GMT+8下午7:03">a month ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/mysql.go" class="js-directory-link" id="fa6657a0cae6e01d3f083eed96998178-0dbc3d1d5e91c358f6d45706c39ed82fcfdcd8d3" title="mysql.go">mysql.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/21f4de584f1cd93b15bf2ed498e861933ff37ff4" class="message" data-pjax="true" title="Use tableName.field or tableName.* in returning string">Use tableName.field or tableName.* in returning string</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-08T11:03:42Z" is="time-ago" title="2014年12月8日 GMT+8下午7:03">a month ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/postgres.go" class="js-directory-link" id="dce2e070de6dd445c8a81742c8fc7d06-2229e7b1306e553b3023eb0c1fdca888b5aa25ca" title="postgres.go">postgres.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/aa8bc02c115c07dc967cd38f23d67c5ae0d84460" class="message" data-pjax="true" title="Fix broken test for postgres">Fix broken test for postgres</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-13T23:59:21Z" is="time-ago" title="2015年1月14日 GMT+8上午7:59">15 hours ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/query_test.go" class="js-directory-link" id="7ad089ebdd340050ab8014ca74b5b0da-be309ed75010329b6df3ce1a751fa306cf840ba5" title="query_test.go">query_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/045b4d6d2aec55681bfea250c69287884f36a5e8" class="message" data-pjax="true" title="Fix error when chaining empty where conditions">Fix error when chaining empty where conditions</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-04T12:47:25Z" is="time-ago" title="2015年1月4日 GMT+8下午8:47">10 days ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/scope.go" class="js-directory-link" id="47497ba035375764f5fb117df36284fd-daf3acec497ce7129e6df4384581aa961f4d3b76" title="scope.go">scope.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/3500dfa1b613500a01a4798d8d17fb4d13d90ad4" class="message" data-pjax="true" title="expose db.New as API">expose db.New as API</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-06T07:11:41Z" is="time-ago" title="2015年1月6日 GMT+8下午3:11">8 days ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/scope_private.go" class="js-directory-link" id="94e8518e61bc1742edb2ac53c97b5daa-a48f443b65dc32dd858860e6f4c58ea6abaf54a0" title="scope_private.go">scope_private.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/fef286a7bccc00174f51522e8c292ec6443a0a89" class="message" data-pjax="true" title="Fixes #335 - Added scoped table name to &quot;deleted_at&quot; where clause. This ensures it works when the deleted_at column is ambigious, for example, during a join.">Fixes</a> <a href="https://github.com/jinzhu/gorm/issues/335" class="issue-link" title="&quot;Column &#39;deleted_at&#39; in where clause is ambiguous&quot; when using Join">#335</a> <a href="https://github.com/jinzhu/gorm/commit/fef286a7bccc00174f51522e8c292ec6443a0a89" class="message" data-pjax="true" title="Fixes #335 - Added scoped table name to &quot;deleted_at&quot; where clause. This ensures it works when the deleted_at column is ambigious, for example, during a join.">- Added scoped table name to "deleted_at" where clause. Th…</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-11T21:49:36Z" is="time-ago" title="2015年1月12日 GMT+8上午5:49">3 days ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/scope_test.go" class="js-directory-link" id="0a25513fe2f65f1a505df0af3edc4b15-42458995d31a4d26613cce6f3c8bb3da50869c29" title="scope_test.go">scope_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/da3e74ba6fbea9517b3c613772a2963445eb3319" class="message" data-pjax="true" title="Add support for signed and unsigned integer types as primary key type">Add support for signed and unsigned integer types as primary key type</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-12T02:09:06Z" is="time-ago" title="2014年11月12日 GMT+8上午10:09">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/search.go" class="js-directory-link" id="059dc0366ae402fcb2b70107da19b22d-78ed530011f71a6d4abbd5b390c06c3654ad0859" title="search.go">search.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/429a10085676fdd0fff56169b3b9e42dddcbd3b1" class="message" data-pjax="true" title="Add additional methods of specifying the &#39;select&#39; portion of a query.

This commit adds more ways of specifying selects:

-) You can now pass in a []string.  This is mostly for convenience,
since you may want to dynamically create a list of fields to be
selected.

-) You can now use variables.  This is important because a select
could take user input.  For example, finding a MAX between a record
and a given number could be easily done using select, and then
you don&#39;t have to process anything in backend logic.  This is also
necessary to use postgres text search capabilities (which actaully
play nicely with the rest of gorm).

-) You can now chain select calls.  This could be useful in
conjunction with gorm&#39;s scopes functionality.">Add additional methods of specifying the 'select' portion of a query.</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-17T12:36:26Z" is="time-ago" title="2014年11月17日 GMT+8下午8:36">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/search_test.go" class="js-directory-link" id="b517592aaf296c4f20cccab462dfe0e6-2d0af08b646510b6ae5fce564c786bffdc9307d8" title="search_test.go">search_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/429a10085676fdd0fff56169b3b9e42dddcbd3b1" class="message" data-pjax="true" title="Add additional methods of specifying the &#39;select&#39; portion of a query.

This commit adds more ways of specifying selects:

-) You can now pass in a []string.  This is mostly for convenience,
since you may want to dynamically create a list of fields to be
selected.

-) You can now use variables.  This is important because a select
could take user input.  For example, finding a MAX between a record
and a given number could be easily done using select, and then
you don&#39;t have to process anything in backend logic.  This is also
necessary to use postgres text search capabilities (which actaully
play nicely with the rest of gorm).

-) You can now chain select calls.  This could be useful in
conjunction with gorm&#39;s scopes functionality.">Add additional methods of specifying the 'select' portion of a query.</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-17T12:36:26Z" is="time-ago" title="2014年11月17日 GMT+8下午8:36">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/sqlite3.go" class="js-directory-link" id="92964c2a9c36ce2c4c73316d1a90f2ac-266b464243ea8842483ebdb8b6d0368472f7a500" title="sqlite3.go">sqlite3.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/21f4de584f1cd93b15bf2ed498e861933ff37ff4" class="message" data-pjax="true" title="Use tableName.field or tableName.* in returning string">Use tableName.field or tableName.* in returning string</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-08T11:03:42Z" is="time-ago" title="2014年12月8日 GMT+8下午7:03">a month ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/structs_test.go" class="js-directory-link" id="d5471927ff4a808103cdd02f175f695a-acd4cc74b0be9e0bdae56e195621da98e201e812" title="structs_test.go">structs_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/0fa1335555f40164b4da8c0d888e48863f18ad65" class="message" data-pjax="true" title="Avoid Errors in postgres when creating a row without a GORM defined primary key (but defined db-side)">Avoid Errors in postgres when creating a row without a GORM defined p…</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-12-08T10:33:30Z" is="time-ago" title="2014年12月8日 GMT+8下午6:33">a month ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/test_all.sh" class="js-directory-link" id="b608a613ac3d9767146482038c79dfba-6c5593b3753f097624e2868614f7d2a68b91047d" title="test_all.sh">test_all.sh</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/204df61a8b153823892bd11b47933c329a6f1fcf" class="message" data-pjax="true" title="Add scripts to test all dialects">Add scripts to test all dialects</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2013-12-04T04:07:19Z" is="time-ago" title="2013年12月4日 GMT+8下午12:07">a year ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/update_test.go" class="js-directory-link" id="b14220b580cd07fbcba5a4b66ff42545-e122798398b78fcc69f9bb3bbd1eeca911bf9fb6" title="update_test.go">update_test.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/064d91335b780aaec30e489bc2cb0933d61b97c5" class="message" data-pjax="true" title="Add default values support ( https://github.com/jinzhu/gorm/issues/251 )">Add default values support (</a> <a href="https://github.com/jinzhu/gorm/issues/251" class="issue-link" title="Unwanted default values">#251</a> <a href="https://github.com/jinzhu/gorm/commit/064d91335b780aaec30e489bc2cb0933d61b97c5" class="message" data-pjax="true" title="Add default values support ( https://github.com/jinzhu/gorm/issues/251 )">)</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-11-15T17:32:35Z" is="time-ago" title="2014年11月16日 GMT+8上午1:32">2 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/utils.go" class="js-directory-link" id="7d1c2a3334601b6c1958aae0a594cba8-840af20a9a1314d96c942671c920910801fa4dc6" title="utils.go">utils.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/9bee4239d401dcacde03bd54b9fb7ff3e306e3ce" class="message" data-pjax="true" title="FieldValueByName does now only what it should

FieldValueByName in utils.go does now only what it should and has proper errors.">FieldValueByName does now only what it should</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-10-01T14:20:12Z" is="time-ago" title="2014年10月1日 GMT+8下午10:20">4 months ago</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="./jinzhu gorm_files/octocat-spinner-32.gif" width="16">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="https://github.com/jinzhu/gorm/blob/master/utils_private.go" class="js-directory-link" id="814f1762d0faeff967f0884d793b719a-0b46cfdb2db57c3208f086c4f0fd7266ecfa0ce9" title="utils_private.go">utils_private.go</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="https://github.com/jinzhu/gorm/commit/73c47b90feef8dbd61f292a12ae94decdd96ac5f" class="message" data-pjax="true" title="check isIgnored when compiling attrs to update">check isIgnored when compiling attrs to update</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-01-13T23:53:09Z" is="time-ago" title="2015年1月14日 GMT+8上午7:53">15 hours ago</time></span>
          </td>
        </tr>
    </tbody>
  </table>

</div>


  <div id="readme" class="boxed-group flush clearfix announce instapaper_body md">
    <h3>
      <span class="octicon octicon-book"></span>
      README.md
    </h3>

    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a id="user-content-gorm" class="anchor" href="https://github.com/jinzhu/gorm#gorm" aria-hidden="true"><span class="octicon octicon-link"></span></a>GORM</h1>

<p>The fantastic ORM library for Golang, aims to be developer friendly.</p>

<p><a href="https://app.wercker.com/project/bykey/0cb7bb1039e21b74f8274941428e0921"><img src="./jinzhu gorm_files/68747470733a2f2f6170702e776572636b65722e636f6d2f7374617475732f30636237626231303339653231623734663832373439343134323865303932312f732f6d6173746572" alt="wercker status" title="wercker status" data-canonical-src="https://app.wercker.com/status/0cb7bb1039e21b74f8274941428e0921/s/master" style="max-width:100%;"></a></p>

<h2>
<a id="user-content-overview" class="anchor" href="https://github.com/jinzhu/gorm#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h2>

<ul class="task-list">
<li>Chainable API</li>
<li>Embedded Structs</li>
<li>Relations</li>
<li>Callbacks (before/after create/save/update/delete/find)</li>
<li>Soft Deletes</li>
<li>Auto Migrations</li>
<li>Transactions</li>
<li>Customizable Logger</li>
<li>Iteration Support via <a href="https://github.com/jinzhu/gorm#row--rows">Rows</a>
</li>
<li>Scopes</li>
<li>sql.Scanner support</li>
<li>Polymorphism</li>
<li>Every feature comes with tests</li>
<li>Convention Over Configuration</li>
<li>Developer Friendly</li>
</ul>

<h2>
<a id="user-content-conventions" class="anchor" href="https://github.com/jinzhu/gorm#conventions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conventions</h2>

<ul class="task-list">
<li>Table name is the plural of struct name's snake case, you can disable pluralization with <code>db.SingularTable(true)</code>, or <a href="https://github.com/jinzhu/gorm#specifying-the-table-name-for-a-struct-permanently-with-tablename">Specifying The Table Name For A Struct Permanently With TableName</a>
</li>
</ul>

<div class="highlight highlight-go"><pre><span class="pl-c">// E.g finding an existing User</span>
<span class="pl-k">var</span> <span class="pl-vo">user</span> <span class="pl-v">User</span>
<span class="pl-c">// Gorm will know to use table "users" ("user" if pluralisation has been disabled) for all operations.</span>
db.<span class="pl-s3">First</span>(&amp;user)

<span class="pl-c">// creating a new User</span>
db.<span class="pl-s3">Save</span>(&amp;User{Name: <span class="pl-s1"><span class="pl-pds">"</span>xxx<span class="pl-pds">"</span></span>}) <span class="pl-c">// table "users"</span></pre></div>

<ul class="task-list">
<li>Column name is the snake case of field's name</li>
<li>Use <code>Id</code> field as primary key</li>
<li>Use tag <code>sql</code> to change field's property, change the tag name with <code>db.SetTagIdentifier(new_name)</code>
</li>
<li>Use <code>CreatedAt</code> to store record's created time if field exists</li>
<li>Use <code>UpdatedAt</code> to store record's updated time if field exists</li>
<li>Use <code>DeletedAt</code> to store record's deleted time if field exists <a href="https://github.com/jinzhu/gorm#soft-delete">Soft Delete</a>
</li>
</ul>

<h1>
<a id="user-content-getting-started" class="anchor" href="https://github.com/jinzhu/gorm#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h1>

<h2>
<a id="user-content-install" class="anchor" href="https://github.com/jinzhu/gorm#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h2>

<pre><code>go get -u github.com/jinzhu/gorm
</code></pre>

<h2>
<a id="user-content-define-models-structs" class="anchor" href="https://github.com/jinzhu/gorm#define-models-structs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Define Models (Structs)</h2>

<div class="highlight highlight-go"><pre><span class="pl-k">type</span> <span class="pl-v">User</span> <span class="pl-st">struct</span> {
    <span class="pl-v">Id</span>           <span class="pl-st">int64</span>
    <span class="pl-v">Birthday</span>     time.<span class="pl-vo">Time</span>
    <span class="pl-v">Age</span>          <span class="pl-st">int64</span>
    <span class="pl-v">Name</span>         <span class="pl-st">string</span>  <span class="pl-s1"><span class="pl-pds">`</span>sql:"size:255"<span class="pl-pds">`</span></span>
    <span class="pl-v">CreatedAt</span>    time.<span class="pl-vo">Time</span>
    <span class="pl-v">UpdatedAt</span>    time.<span class="pl-vo">Time</span>
    <span class="pl-v">DeletedAt</span>    time.<span class="pl-vo">Time</span>

    <span class="pl-v">Emails</span>            []<span class="pl-v">Email</span>         <span class="pl-c">// One-To-Many relationship (has many)</span>
    <span class="pl-v">BillingAddress</span>    <span class="pl-v">Address</span>         <span class="pl-c">// One-To-One relationship (has one)</span>
    <span class="pl-v">BillingAddressId</span>  sql.<span class="pl-vo">NullInt64</span>   <span class="pl-c">// Foreign key of BillingAddress</span>
    <span class="pl-v">ShippingAddress</span>   <span class="pl-v">Address</span>         <span class="pl-c">// One-To-One relationship (has one)</span>
    <span class="pl-v">ShippingAddressId</span> <span class="pl-st">int64</span>           <span class="pl-c">// Foreign key of ShippingAddress</span>
    <span class="pl-v">IgnoreMe</span>          <span class="pl-st">int64</span> <span class="pl-s1"><span class="pl-pds">`</span>sql:"-"<span class="pl-pds">`</span></span> <span class="pl-c">// Ignore this field</span>
    <span class="pl-v">Languages</span>         []<span class="pl-v">Language</span> <span class="pl-s1"><span class="pl-pds">`</span>gorm:"many2many:user_languages;"<span class="pl-pds">`</span></span> <span class="pl-c">// Many-To-Many relationship, 'user_languages' is join table</span>
}

<span class="pl-k">type</span> <span class="pl-v">Email</span> <span class="pl-st">struct</span> {
    <span class="pl-v">Id</span>         <span class="pl-st">int64</span>
    <span class="pl-v">UserId</span>     <span class="pl-st">int64</span>   <span class="pl-c">// Foreign key for User (belongs to)</span>
    <span class="pl-v">Email</span>      <span class="pl-st">string</span>  <span class="pl-s1"><span class="pl-pds">`</span>sql:"type:varchar(100);"<span class="pl-pds">`</span></span> <span class="pl-c">// Set field's type</span>
    <span class="pl-v">Subscribed</span> <span class="pl-st">bool</span>
}

<span class="pl-k">type</span> <span class="pl-v">Address</span> <span class="pl-st">struct</span> {
    <span class="pl-v">Id</span>       <span class="pl-st">int64</span>
    <span class="pl-v">Address1</span> <span class="pl-st">string</span>         <span class="pl-s1"><span class="pl-pds">`</span>sql:"not null;unique"<span class="pl-pds">`</span></span> <span class="pl-c">// Set field as not nullable and unique</span>
    <span class="pl-v">Address2</span> <span class="pl-st">string</span>         <span class="pl-s1"><span class="pl-pds">`</span>sql:"type:varchar(100);unique"<span class="pl-pds">`</span></span>
    <span class="pl-v">Post</span>     sql.<span class="pl-vo">NullString</span> <span class="pl-s1"><span class="pl-pds">`</span>sql:not null<span class="pl-pds">`</span></span>
}

<span class="pl-k">type</span> <span class="pl-v">Language</span> <span class="pl-st">struct</span> {
    <span class="pl-v">Id</span>   <span class="pl-st">int64</span>
    <span class="pl-v">Name</span> <span class="pl-st">string</span>
}</pre></div>

<h2>
<a id="user-content-initialize-database" class="anchor" href="https://github.com/jinzhu/gorm#initialize-database" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initialize Database</h2>

<div class="highlight highlight-go"><pre><span class="pl-k">import</span> (
    <span class="pl-s1"><span class="pl-pds">"</span>github.com/jinzhu/gorm<span class="pl-pds">"</span></span>
    _ <span class="pl-s1"><span class="pl-pds">"</span>github.com/lib/pq<span class="pl-pds">"</span></span>
    _ <span class="pl-s1"><span class="pl-pds">"</span>github.com/go-sql-driver/mysql<span class="pl-pds">"</span></span>
    _ <span class="pl-s1"><span class="pl-pds">"</span>github.com/mattn/go-sqlite3<span class="pl-pds">"</span></span>
)

<span class="pl-vo">db</span>, <span class="pl-vo">err</span> <span class="pl-k">:=</span> gorm.<span class="pl-s3">Open</span>(<span class="pl-s1"><span class="pl-pds">"</span>postgres<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>user=gorm dbname=gorm sslmode=disable<span class="pl-pds">"</span></span>)
<span class="pl-c">// db, err := gorm.Open("mysql", "user:password@/dbname?charset=utf8&amp;parseTime=True")</span>
<span class="pl-c">// db, err := gorm.Open("sqlite3", "/tmp/gorm.db")</span>

<span class="pl-c">// You can also use an existing database connection handle</span>
<span class="pl-c">// dbSql, _ := sql.Open("postgres", "user=gorm dbname=gorm sslmode=disable")</span>
<span class="pl-c">// db := gorm.Open("postgres", dbSql)</span>

<span class="pl-c">// Get database connection handle [*sql.DB](http://golang.org/pkg/database/sql/#DB)</span>
db.<span class="pl-s3">DB</span>()

<span class="pl-c">// Then you could invoke `*sql.DB`'s functions with it</span>
db.<span class="pl-s3">DB</span>().<span class="pl-s3">Ping</span>()
db.<span class="pl-s3">DB</span>().<span class="pl-s3">SetMaxIdleConns</span>(<span class="pl-c1">10</span>)
db.<span class="pl-s3">DB</span>().<span class="pl-s3">SetMaxOpenConns</span>(<span class="pl-c1">100</span>)

<span class="pl-c">// Disable table name's pluralization</span>
db.<span class="pl-s3">SingularTable</span>(<span class="pl-c1">true</span>)</pre></div>

<h2>
<a id="user-content-migration" class="anchor" href="https://github.com/jinzhu/gorm#migration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Migration</h2>

<div class="highlight highlight-go"><pre><span class="pl-c">// Create table</span>
db.<span class="pl-s3">CreateTable</span>(&amp;User{})

<span class="pl-c">// Drop table</span>
db.<span class="pl-s3">DropTable</span>(&amp;User{})

<span class="pl-c">// Drop table if exists</span>
db.<span class="pl-s3">DropTableIfExists</span>(&amp;User{})

<span class="pl-c">// Automating Migration</span>
db.<span class="pl-s3">AutoMigrate</span>(&amp;User{})
db.<span class="pl-s3">AutoMigrate</span>(&amp;User{}, &amp;Product{}, &amp;Order{})

<span class="pl-c">// Feel free to change your struct, AutoMigrate will keep your database up-to-date.</span>
<span class="pl-c">// Fyi, AutoMigrate will only *add new columns*, it won't update column's type or delete unused columns, to make sure your data is safe.</span>
<span class="pl-c">// If the table is not existing, AutoMigrate will create the table automatically.</span>

<span class="pl-c">// Add index</span>
db.<span class="pl-s3">Model</span>(&amp;User{}).<span class="pl-s3">AddIndex</span>(<span class="pl-s1"><span class="pl-pds">"</span>idx_user_name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>)

<span class="pl-c">// Multiple column index</span>
db.<span class="pl-s3">Model</span>(&amp;User{}).<span class="pl-s3">AddIndex</span>(<span class="pl-s1"><span class="pl-pds">"</span>idx_user_name_age<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>)

<span class="pl-c">// Add unique index</span>
db.<span class="pl-s3">Model</span>(&amp;User{}).<span class="pl-s3">AddUniqueIndex</span>(<span class="pl-s1"><span class="pl-pds">"</span>idx_user_name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>)

<span class="pl-c">// Multiple column unique index</span>
db.<span class="pl-s3">Model</span>(&amp;User{}).<span class="pl-s3">AddUniqueIndex</span>(<span class="pl-s1"><span class="pl-pds">"</span>idx_user_name_age<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>)

<span class="pl-c">// Remove index</span>
db.<span class="pl-s3">Model</span>(&amp;User{}).<span class="pl-s3">RemoveIndex</span>(<span class="pl-s1"><span class="pl-pds">"</span>idx_user_name<span class="pl-pds">"</span></span>)</pre></div>

<h1>
<a id="user-content-basic-crud" class="anchor" href="https://github.com/jinzhu/gorm#basic-crud" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic CRUD</h1>

<h2>
<a id="user-content-create-record" class="anchor" href="https://github.com/jinzhu/gorm#create-record" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create Record</h2>

<div class="highlight highlight-go"><pre><span class="pl-vo">user</span> <span class="pl-k">:=</span> <span class="pl-v">User</span>{Name: <span class="pl-s1"><span class="pl-pds">"</span>Jinzhu<span class="pl-pds">"</span></span>, <span class="pl-v">Age</span>: <span class="pl-c1">18</span>, <span class="pl-v">Birthday</span>: time.<span class="pl-s3">Now</span>()}

<span class="pl-c">// returns true if record hasn’t been saved (primary key `Id` is blank)</span>
db.<span class="pl-s3">NewRecord</span>(user) <span class="pl-c">// =&gt; true</span>

db.<span class="pl-s3">Create</span>(&amp;user)

<span class="pl-c">// will return false after `user` created</span>
db.<span class="pl-s3">NewRecord</span>(user) <span class="pl-c">// =&gt; false</span>

<span class="pl-c">// You could use `Save` to create record also if its primary key is null</span>
db.<span class="pl-s3">Save</span>(&amp;user)

<span class="pl-c">// Associations will be saved automatically when insert the record</span>
<span class="pl-vo">user</span> <span class="pl-k">:=</span> <span class="pl-v">User</span>{
    <span class="pl-v">Name</span>:            <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>,
    <span class="pl-v">BillingAddress</span>:  <span class="pl-v">Address</span>{Address1: <span class="pl-s1"><span class="pl-pds">"</span>Billing Address - Address 1<span class="pl-pds">"</span></span>},
    <span class="pl-v">ShippingAddress</span>: <span class="pl-v">Address</span>{Address1: <span class="pl-s1"><span class="pl-pds">"</span>Shipping Address - Address 1<span class="pl-pds">"</span></span>},
    <span class="pl-v">Emails</span>:          []<span class="pl-v">Email</span>{{Email: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu@example.com<span class="pl-pds">"</span></span>}, {Email: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu-2@example@example.com<span class="pl-pds">"</span></span>}},
    <span class="pl-v">Languages</span>:       []<span class="pl-v">Language</span>{{Name: <span class="pl-s1"><span class="pl-pds">"</span>ZH<span class="pl-pds">"</span></span>}, {Name: <span class="pl-s1"><span class="pl-pds">"</span>EN<span class="pl-pds">"</span></span>}},
}

db.<span class="pl-s3">Create</span>(&amp;user)
<span class="pl-c">//// BEGIN TRANSACTION;</span>
<span class="pl-c">//// INSERT INTO "addresses" (address1) VALUES ("Billing Address - Address 1");</span>
<span class="pl-c">//// INSERT INTO "addresses" (address1) VALUES ("Shipping Address - Address 1");</span>
<span class="pl-c">//// INSERT INTO "users" (name,billing_address_id,shipping_address_id) VALUES ("jinzhu", 1, 2);</span>
<span class="pl-c">//// INSERT INTO "emails" (user_id,email) VALUES (111, "jinzhu@example.com");</span>
<span class="pl-c">//// INSERT INTO "emails" (user_id,email) VALUES (111, "jinzhu-2@example.com");</span>
<span class="pl-c">//// INSERT INTO "languages" ("name") VALUES ('ZH');</span>
<span class="pl-c">//// INSERT INTO user_languages ("user_id","language_id") VALUES (111, 1);</span>
<span class="pl-c">//// INSERT INTO "languages" ("name") VALUES ('EN');</span>
<span class="pl-c">//// INSERT INTO user_languages ("user_id","language_id") VALUES (111, 2);</span>
<span class="pl-c">//// COMMIT;</span></pre></div>

<p>Refer <a href="https://github.com/jinzhu/gorm#associations">Associations</a> for how to work with associations</p>

<h2>
<a id="user-content-query" class="anchor" href="https://github.com/jinzhu/gorm#query" aria-hidden="true"><span class="octicon octicon-link"></span></a>Query</h2>

<div class="highlight highlight-go"><pre><span class="pl-c">// Get the first record</span>
db.<span class="pl-s3">First</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users ORDER BY id LIMIT 1;</span>

<span class="pl-c">// Get the last record</span>
db.<span class="pl-s3">Last</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users ORDER BY id DESC LIMIT 1;</span>

<span class="pl-c">// Get all records</span>
db.<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users;</span>

<span class="pl-c">// Get record with primary key</span>
db.<span class="pl-s3">First</span>(&amp;user, <span class="pl-c1">10</span>)
<span class="pl-c">//// SELECT * FROM users WHERE id = 10;</span></pre></div>

<h3>
<a id="user-content-query-with-where-plain-sql" class="anchor" href="https://github.com/jinzhu/gorm#query-with-where-plain-sql" aria-hidden="true"><span class="octicon octicon-link"></span></a>Query With Where (Plain SQL)</h3>

<div class="highlight highlight-go"><pre><span class="pl-c">// Get the first matched record</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE name = 'jinzhu' limit 1;</span>

<span class="pl-c">// Get all matched records</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users WHERE name = 'jinzhu';</span>

db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name &lt;&gt; ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)

<span class="pl-c">// IN</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name in (?)<span class="pl-pds">"</span></span>, []<span class="pl-st">string</span>{<span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu 2<span class="pl-pds">"</span></span>}).<span class="pl-s3">Find</span>(&amp;users)

<span class="pl-c">// LIKE</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name LIKE ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-ii">%</span>jin<span class="pl-ii">%</span><span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)

<span class="pl-c">// AND</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ? and age &gt;= ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>22<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)</pre></div>

<h3>
<a id="user-content-query-with-where-struct--map" class="anchor" href="https://github.com/jinzhu/gorm#query-with-where-struct--map" aria-hidden="true"><span class="octicon octicon-link"></span></a>Query With Where (Struct &amp; Map)</h3>

<div class="highlight highlight-go"><pre><span class="pl-c">// Struct</span>
db.<span class="pl-s3">Where</span>(&amp;User{Name: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>, <span class="pl-v">Age</span>: <span class="pl-c1">20</span>}).<span class="pl-s3">First</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE name = "jinzhu" AND age = 20 LIMIT 1;</span>

<span class="pl-c">// Map</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s">map</span>[<span class="pl-st">string</span>]<span class="pl-k">interface</span>{}{<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">20</span>}).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users WHERE name = "jinzhu" AND age = 20;</span>

<span class="pl-c">// Slice of primary keys</span>
db.<span class="pl-s3">Where</span>([]<span class="pl-st">int64</span>{<span class="pl-c1">20</span>, <span class="pl-c1">21</span>, <span class="pl-c1">22</span>}).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users WHERE id IN (20, 21, 22);</span></pre></div>

<h3>
<a id="user-content-query-with-not" class="anchor" href="https://github.com/jinzhu/gorm#query-with-not" aria-hidden="true"><span class="octicon octicon-link"></span></a>Query With Not</h3>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Not</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE name &lt;&gt; "jinzhu" LIMIT 1;</span>

<span class="pl-c">// Not In</span>
db.<span class="pl-s3">Not</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, []<span class="pl-st">string</span>{<span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu 2<span class="pl-pds">"</span></span>}).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users WHERE name NOT IN ("jinzhu", "jinzhu 2");</span>

<span class="pl-c">// Not In slice of primary keys</span>
db.<span class="pl-s3">Not</span>([]<span class="pl-st">int64</span>{<span class="pl-c1">1</span>,<span class="pl-c1">2</span>,<span class="pl-c1">3</span>}).<span class="pl-s3">First</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE id NOT IN (1,2,3);</span>

db.<span class="pl-s3">Not</span>([]<span class="pl-st">int64</span>{}).<span class="pl-s3">First</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users;</span>

<span class="pl-c">// Plain SQL</span>
db.<span class="pl-s3">Not</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE NOT(name = "jinzhu");</span>

<span class="pl-c">// Struct</span>
db.<span class="pl-s3">Not</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>}).<span class="pl-s3">First</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE name &lt;&gt; "jinzhu";</span></pre></div>

<h3>
<a id="user-content-query-with-inline-condition" class="anchor" href="https://github.com/jinzhu/gorm#query-with-inline-condition" aria-hidden="true"><span class="octicon octicon-link"></span></a>Query With Inline Condition</h3>

<div class="highlight highlight-go"><pre><span class="pl-c">// Get by primary key</span>
db.<span class="pl-s3">First</span>(&amp;user, <span class="pl-c1">23</span>)
<span class="pl-c">//// SELECT * FROM users WHERE id = 23 LIMIT 1;</span>

<span class="pl-c">// Plain SQL</span>
db.<span class="pl-s3">Find</span>(&amp;user, <span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>)
<span class="pl-c">//// SELECT * FROM users WHERE name = "jinzhu";</span>

db.<span class="pl-s3">Find</span>(&amp;users, <span class="pl-s1"><span class="pl-pds">"</span>name &lt;&gt; ? AND age &gt; ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>, <span class="pl-c1">20</span>)
<span class="pl-c">//// SELECT * FROM users WHERE name &lt;&gt; "jinzhu" AND age &gt; 20;</span>

<span class="pl-c">// Struct</span>
db.<span class="pl-s3">Find</span>(&amp;users, <span class="pl-v">User</span>{Age: <span class="pl-c1">20</span>})
<span class="pl-c">//// SELECT * FROM users WHERE age = 20;</span>

<span class="pl-c">// Map</span>
db.<span class="pl-s3">Find</span>(&amp;users, <span class="pl-s">map</span>[<span class="pl-st">string</span>]<span class="pl-k">interface</span>{}{<span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">20</span>})
<span class="pl-c">//// SELECT * FROM users WHERE age = 20;</span></pre></div>

<h3>
<a id="user-content-query-with-or" class="anchor" href="https://github.com/jinzhu/gorm#query-with-or" aria-hidden="true"><span class="octicon octicon-link"></span></a>Query With Or</h3>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>role = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>admin<span class="pl-pds">"</span></span>).<span class="pl-s3">Or</span>(<span class="pl-s1"><span class="pl-pds">"</span>role = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>super_admin<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users WHERE role = 'admin' OR role = 'super_admin';</span>

<span class="pl-c">// Struct</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = 'jinzhu'<span class="pl-pds">"</span></span>).<span class="pl-s3">Or</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu 2<span class="pl-pds">"</span></span>}).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users WHERE name = 'jinzhu' OR name = 'jinzhu 2';</span>

<span class="pl-c">// Map</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = 'jinzhu'<span class="pl-pds">"</span></span>).<span class="pl-s3">Or</span>(<span class="pl-s">map</span>[<span class="pl-st">string</span>]<span class="pl-k">interface</span>{}{<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu 2<span class="pl-pds">"</span></span>}).<span class="pl-s3">Find</span>(&amp;users)</pre></div>

<h3>
<a id="user-content-query-chains" class="anchor" href="https://github.com/jinzhu/gorm#query-chains" aria-hidden="true"><span class="octicon octicon-link"></span></a>Query Chains</h3>

<p>Gorm has a chainable API, you could use it like this</p>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name &lt;&gt; ?<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>age &gt;= ? and role &lt;&gt; ?<span class="pl-pds">"</span></span>,<span class="pl-c1">20</span>,<span class="pl-s1"><span class="pl-pds">"</span>admin<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users WHERE name &lt;&gt; 'jinzhu' AND age &gt;= 20 AND role &lt;&gt; 'admin';</span>

db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>role = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>admin<span class="pl-pds">"</span></span>).<span class="pl-s3">Or</span>(<span class="pl-s1"><span class="pl-pds">"</span>role = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>super_admin<span class="pl-pds">"</span></span>).<span class="pl-s3">Not</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)</pre></div>

<h2>
<a id="user-content-update" class="anchor" href="https://github.com/jinzhu/gorm#update" aria-hidden="true"><span class="octicon octicon-link"></span></a>Update</h2>

<div class="highlight highlight-go"><pre><span class="pl-c">// Update an existing struct</span>
db.<span class="pl-s3">First</span>(&amp;user)
user.<span class="pl-vo">Name</span> = <span class="pl-s1"><span class="pl-pds">"</span>jinzhu 2<span class="pl-pds">"</span></span>
user.<span class="pl-vo">Age</span> = <span class="pl-c1">100</span>
db.<span class="pl-s3">Save</span>(&amp;user)
<span class="pl-c">//// UPDATE users SET name='jinzhu 2', age=100, updated_at = '2013-11-17 21:34:10' WHERE id=111;</span>

<span class="pl-c">// Update an attribute if it is changed</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Update</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>)
<span class="pl-c">//// UPDATE users SET name='hello', updated_at = '2013-11-17 21:34:10' WHERE id=111;</span>

db.<span class="pl-s3">First</span>(&amp;user, <span class="pl-c1">111</span>).<span class="pl-s3">Update</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>)
<span class="pl-c">//// SELECT * FROM users LIMIT 1;</span>
<span class="pl-c">//// UPDATE users SET name='hello', updated_at = '2013-11-17 21:34:10' WHERE id=111;</span>

<span class="pl-c">// Update multiple attributes if they are changed</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Updates</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-v">Age</span>: <span class="pl-c1">18</span>})
<span class="pl-c">//// UPDATE users SET name='hello', age=18, updated_at = '2013-11-17 21:34:10' WHERE id = 111;</span></pre></div>

<h3>
<a id="user-content-update-without-callbacks" class="anchor" href="https://github.com/jinzhu/gorm#update-without-callbacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Update Without Callbacks</h3>

<p>By default, update will call BeforeUpdate, AfterUpdate callbacks, if you want to update w/o callbacks:</p>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">UpdateColumn</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>)
<span class="pl-c">//// UPDATE users SET name='hello' WHERE id = 111;</span>

db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">UpdateColumns</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-v">Age</span>: <span class="pl-c1">18</span>})
<span class="pl-c">//// UPDATE users SET name='hello', age=18 WHERE id = 111;</span></pre></div>

<h3>
<a id="user-content-batch-updates" class="anchor" href="https://github.com/jinzhu/gorm#batch-updates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Batch Updates</h3>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>).<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>id = ?<span class="pl-pds">"</span></span>, <span class="pl-c1">10</span>).<span class="pl-s3">Updates</span>(<span class="pl-s">map</span>[<span class="pl-st">string</span>]<span class="pl-k">interface</span>{}{<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">18</span>})
<span class="pl-c">//// UPDATE users SET name='hello', age=18 WHERE id = 10;</span>

db.<span class="pl-s3">Model</span>(User{}).<span class="pl-s3">Updates</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-v">Age</span>: <span class="pl-c1">18</span>})
<span class="pl-c">//// UPDATE users SET name='hello', age=18;</span>

<span class="pl-c">// Callbacks won't be run when do batch updates</span>

<span class="pl-c">// You may would like to know how many records updated when do batch updates</span>
<span class="pl-c">// You could get it with `RowsAffected`</span>
db.<span class="pl-s3">Model</span>(User{}).<span class="pl-s3">Updates</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-v">Age</span>: <span class="pl-c1">18</span>}).<span class="pl-vo">RowsAffected</span></pre></div>

<h2>
<a id="user-content-delete" class="anchor" href="https://github.com/jinzhu/gorm#delete" aria-hidden="true"><span class="octicon octicon-link"></span></a>Delete</h2>

<div class="highlight highlight-go"><pre><span class="pl-c">// Delete an existing record</span>
db.<span class="pl-s3">Delete</span>(&amp;email)
<span class="pl-c">//// DELETE from emails where id=10;</span></pre></div>

<h3>
<a id="user-content-batch-delete" class="anchor" href="https://github.com/jinzhu/gorm#batch-delete" aria-hidden="true"><span class="octicon octicon-link"></span></a>Batch Delete</h3>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>email LIKE ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-ii">%</span>jinzhu<span class="pl-ii">%</span><span class="pl-pds">"</span></span>).<span class="pl-s3">Delete</span>(Email{})
<span class="pl-c">//// DELETE from emails where email LIKE "%jinhu%";</span></pre></div>

<h3>
<a id="user-content-soft-delete" class="anchor" href="https://github.com/jinzhu/gorm#soft-delete" aria-hidden="true"><span class="octicon octicon-link"></span></a>Soft Delete</h3>

<p>If struct has <code>DeletedAt</code> field, it will get soft delete ability automatically!
Then it won't be deleted from database permanently when call <code>Delete</code>.</p>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Delete</span>(&amp;user)
<span class="pl-c">//// UPDATE users SET deleted_at="2013-10-29 10:23" WHERE id = 111;</span>

<span class="pl-c">// Batch Delete</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>age = ?<span class="pl-pds">"</span></span>, <span class="pl-c1">20</span>).<span class="pl-s3">Delete</span>(&amp;User{})
<span class="pl-c">//// UPDATE users SET deleted_at="2013-10-29 10:23" WHERE age = 20;</span>

<span class="pl-c">// Soft deleted records will be ignored when query them</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>age = 20<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE age = 20 AND (deleted_at IS NULL AND deleted_at &lt;= '0001-01-02');</span>

<span class="pl-c">// Find soft deleted records with Unscoped</span>
db.<span class="pl-s3">Unscoped</span>().<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>age = 20<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users WHERE age = 20;</span>

<span class="pl-c">// Delete record permanently with Unscoped</span>
db.<span class="pl-s3">Unscoped</span>().<span class="pl-s3">Delete</span>(&amp;order)
<span class="pl-c">//// DELETE FROM orders WHERE id=10;</span></pre></div>

<h2>
<a id="user-content-associations" class="anchor" href="https://github.com/jinzhu/gorm#associations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Associations</h2>

<h3>
<a id="user-content-has-one" class="anchor" href="https://github.com/jinzhu/gorm#has-one" aria-hidden="true"><span class="octicon octicon-link"></span></a>Has One</h3>

<div class="highlight highlight-go"><pre><span class="pl-c">// User has one address</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Related</span>(&amp;address)
<span class="pl-c">//// SELECT * FROM addresses WHERE id = 123; // 123 is user's foreign key AddressId</span>

<span class="pl-c">// Specify the foreign key</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Related</span>(&amp;address1, <span class="pl-s1"><span class="pl-pds">"</span>BillingAddressId<span class="pl-pds">"</span></span>)
<span class="pl-c">//// SELECT * FROM addresses WHERE id = 123; // 123 is user's foreign key BillingAddressId</span></pre></div>

<h3>
<a id="user-content-belongs-to" class="anchor" href="https://github.com/jinzhu/gorm#belongs-to" aria-hidden="true"><span class="octicon octicon-link"></span></a>Belongs To</h3>

<div class="highlight highlight-go"><pre><span class="pl-c">// Email belongs to user</span>
db.<span class="pl-s3">Model</span>(&amp;email).<span class="pl-s3">Related</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE id = 111; // 111 is email's foreign key UserId</span>

<span class="pl-c">// Specify the foreign key</span>
db.<span class="pl-s3">Model</span>(&amp;email).<span class="pl-s3">Related</span>(&amp;user, <span class="pl-s1"><span class="pl-pds">"</span>ProfileId<span class="pl-pds">"</span></span>)
<span class="pl-c">//// SELECT * FROM users WHERE id = 111; // 111 is email's foreign key ProfileId</span></pre></div>

<h3>
<a id="user-content-has-many" class="anchor" href="https://github.com/jinzhu/gorm#has-many" aria-hidden="true"><span class="octicon octicon-link"></span></a>Has Many</h3>

<div class="highlight highlight-go"><pre><span class="pl-c">// User has many emails</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Related</span>(&amp;emails)
<span class="pl-c">//// SELECT * FROM emails WHERE user_id = 111;</span>
<span class="pl-c">// user_id is the foreign key, 111 is user's primary key's value</span>

<span class="pl-c">// Specify the foreign key</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Related</span>(&amp;emails, <span class="pl-s1"><span class="pl-pds">"</span>ProfileId<span class="pl-pds">"</span></span>)
<span class="pl-c">//// SELECT * FROM emails WHERE profile_id = 111;</span>
<span class="pl-c">// profile_id is the foreign key, 111 is user's primary key's value</span></pre></div>

<h3>
<a id="user-content-many-to-many" class="anchor" href="https://github.com/jinzhu/gorm#many-to-many" aria-hidden="true"><span class="octicon octicon-link"></span></a>Many To Many</h3>

<div class="highlight highlight-go"><pre><span class="pl-c">// User has many languages and belongs to many languages</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Related</span>(&amp;languages, <span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>)
<span class="pl-c">//// SELECT * FROM "languages" INNER JOIN "user_languages" ON "user_languages"."language_id" = "languages"."id" WHERE "user_languages"."user_id" = 111</span>
<span class="pl-c">// `Languages` is user's column name, this column's tag defined join table like this `gorm:"many2many:user_languages;"`</span></pre></div>

<p>There is also a mode used to handle many to many relations easily</p>

<div class="highlight highlight-go"><pre><span class="pl-c">// Query</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;languages)
<span class="pl-c">// same as `db.Model(&amp;user).Related(&amp;languages, "Languages")`</span>

db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>ZH<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;languageZH)
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>EN<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;languageEN)

<span class="pl-c">// Append</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Append</span>([]<span class="pl-v">Language</span>{languageZH, languageEN})
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Append</span>([]<span class="pl-v">Language</span>{{Name: <span class="pl-s1"><span class="pl-pds">"</span>DE<span class="pl-pds">"</span></span>}})
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Append</span>(Language{Name: <span class="pl-s1"><span class="pl-pds">"</span>DE<span class="pl-pds">"</span></span>})

<span class="pl-c">// Delete</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Delete</span>([]<span class="pl-v">Language</span>{languageZH, languageEN})
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Delete</span>(languageZH, languageEN)

<span class="pl-c">// Replace</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Replace</span>([]<span class="pl-v">Language</span>{languageZH, languageEN})
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Replace</span>(Language{Name: <span class="pl-s1"><span class="pl-pds">"</span>DE<span class="pl-pds">"</span></span>}, languageEN)

<span class="pl-c">// Count</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Count</span>()
<span class="pl-c">// Return the count of languages the user has</span>

<span class="pl-c">// Clear</span>
db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Association</span>(<span class="pl-s1"><span class="pl-pds">"</span>Languages<span class="pl-pds">"</span></span>).<span class="pl-s3">Clear</span>()
<span class="pl-c">// Remove all relations between the user and languages</span></pre></div>

<h3>
<a id="user-content-polymorphism" class="anchor" href="https://github.com/jinzhu/gorm#polymorphism" aria-hidden="true"><span class="octicon octicon-link"></span></a>Polymorphism</h3>

<p>Supports polymorphic has-many and has-one associations.</p>

<div class="highlight highlight-go"><pre>  <span class="pl-k">type</span> <span class="pl-v">Cat</span> <span class="pl-st">struct</span> {
    <span class="pl-v">Id</span>    <span class="pl-st">int</span>
    <span class="pl-v">Name</span>  <span class="pl-st">string</span>
    <span class="pl-v">Toy</span>   <span class="pl-v">Toy</span> <span class="pl-s1"><span class="pl-pds">`</span>gorm:"polymorphic:Owner;"<span class="pl-pds">`</span></span>
  }

  <span class="pl-k">type</span> <span class="pl-v">Dog</span> <span class="pl-st">struct</span> {
    <span class="pl-v">Id</span>   <span class="pl-st">int</span>
    <span class="pl-v">Name</span> <span class="pl-st">string</span>
    <span class="pl-v">Toy</span>  <span class="pl-v">Toy</span> <span class="pl-s1"><span class="pl-pds">`</span>gorm:"polymorphic:Owner;"<span class="pl-pds">`</span></span>
  }

  <span class="pl-k">type</span> <span class="pl-v">Toy</span> <span class="pl-st">struct</span> {
    <span class="pl-v">Id</span>        <span class="pl-st">int</span>
    <span class="pl-v">Name</span>      <span class="pl-st">string</span>
    <span class="pl-v">OwnerId</span>   <span class="pl-st">int</span>
    <span class="pl-v">OwnerType</span> <span class="pl-st">int</span>
  }</pre></div>

<p>Note: polymorphic belongs-to and many-to-many are explicitly NOT supported, and will throw errors.</p>

<h2>
<a id="user-content-advanced-usage" class="anchor" href="https://github.com/jinzhu/gorm#advanced-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced Usage</h2>

<h2>
<a id="user-content-firstorinit" class="anchor" href="https://github.com/jinzhu/gorm#firstorinit" aria-hidden="true"><span class="octicon octicon-link"></span></a>FirstOrInit</h2>

<p>Get the first matched record, or initialize a record with search conditions.</p>

<div class="highlight highlight-go"><pre><span class="pl-c">// Unfound</span>
db.<span class="pl-s3">FirstOrInit</span>(&amp;user, <span class="pl-v">User</span>{Name: <span class="pl-s1"><span class="pl-pds">"</span>non_existing<span class="pl-pds">"</span></span>})
<span class="pl-c">//// user -&gt; User{Name: "non_existing"}</span>

<span class="pl-c">// Found</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>Jinzhu<span class="pl-pds">"</span></span>}).<span class="pl-s3">FirstOrInit</span>(&amp;user)
<span class="pl-c">//// user -&gt; User{Id: 111, Name: "Jinzhu", Age: 20}</span>
db.<span class="pl-s3">FirstOrInit</span>(&amp;user, <span class="pl-s">map</span>[<span class="pl-st">string</span>]<span class="pl-k">interface</span>{}{<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>})
<span class="pl-c">//// user -&gt; User{Id: 111, Name: "Jinzhu", Age: 20}</span></pre></div>

<h3>
<a id="user-content-attrs" class="anchor" href="https://github.com/jinzhu/gorm#attrs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Attrs</h3>

<p>Ignore some values when searching, but use them to initialize the struct if record is not found.</p>

<div class="highlight highlight-go"><pre><span class="pl-c">// Unfound</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>non_existing<span class="pl-pds">"</span></span>}).<span class="pl-s3">Attrs</span>(User{Age: <span class="pl-c1">20</span>}).<span class="pl-s3">FirstOrInit</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM USERS WHERE name = 'non_existing';</span>
<span class="pl-c">//// user -&gt; User{Name: "non_existing", Age: 20}</span>

db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>noexisting_user<span class="pl-pds">"</span></span>}).<span class="pl-s3">Attrs</span>(<span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>, <span class="pl-c1">20</span>).<span class="pl-s3">FirstOrInit</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM USERS WHERE name = 'non_existing';</span>
<span class="pl-c">//// user -&gt; User{Name: "non_existing", Age: 20}</span>

<span class="pl-c">// Found</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>Jinzhu<span class="pl-pds">"</span></span>}).<span class="pl-s3">Attrs</span>(User{Age: <span class="pl-c1">30</span>}).<span class="pl-s3">FirstOrInit</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM USERS WHERE name = jinzhu';</span>
<span class="pl-c">//// user -&gt; User{Id: 111, Name: "Jinzhu", Age: 20}</span></pre></div>

<h3>
<a id="user-content-assign" class="anchor" href="https://github.com/jinzhu/gorm#assign" aria-hidden="true"><span class="octicon octicon-link"></span></a>Assign</h3>

<p>Ignore some values when searching, but assign it to the result regardless it is found or not.</p>

<div class="highlight highlight-go"><pre><span class="pl-c">// Unfound</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>non_existing<span class="pl-pds">"</span></span>}).<span class="pl-s3">Assign</span>(User{Age: <span class="pl-c1">20</span>}).<span class="pl-s3">FirstOrInit</span>(&amp;user)
<span class="pl-c">//// user -&gt; User{Name: "non_existing", Age: 20}</span>

<span class="pl-c">// Found</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>Jinzhu<span class="pl-pds">"</span></span>}).<span class="pl-s3">Assign</span>(User{Age: <span class="pl-c1">30</span>}).<span class="pl-s3">FirstOrInit</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM USERS WHERE name = jinzhu';</span>
<span class="pl-c">//// user -&gt; User{Id: 111, Name: "Jinzhu", Age: 30}</span></pre></div>

<h2>
<a id="user-content-firstorcreate" class="anchor" href="https://github.com/jinzhu/gorm#firstorcreate" aria-hidden="true"><span class="octicon octicon-link"></span></a>FirstOrCreate</h2>

<p>Get the first matched record, or create with search conditions.</p>

<div class="highlight highlight-go"><pre><span class="pl-c">// Unfound</span>
db.<span class="pl-s3">FirstOrCreate</span>(&amp;user, <span class="pl-v">User</span>{Name: <span class="pl-s1"><span class="pl-pds">"</span>non_existing<span class="pl-pds">"</span></span>})
<span class="pl-c">//// INSERT INTO "users" (name) VALUES ("non_existing");</span>
<span class="pl-c">//// user -&gt; User{Id: 112, Name: "non_existing"}</span>

<span class="pl-c">// Found</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>Jinzhu<span class="pl-pds">"</span></span>}).<span class="pl-s3">FirstOrCreate</span>(&amp;user)
<span class="pl-c">//// user -&gt; User{Id: 111, Name: "Jinzhu"}</span></pre></div>

<h3>
<a id="user-content-attrs-1" class="anchor" href="https://github.com/jinzhu/gorm#attrs-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Attrs</h3>

<p>Ignore some values when searching, but use them to create the struct if record is not found. like <code>FirstOrInit</code></p>

<div class="highlight highlight-go"><pre><span class="pl-c">// Unfound</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>non_existing<span class="pl-pds">"</span></span>}).<span class="pl-s3">Attrs</span>(User{Age: <span class="pl-c1">20</span>}).<span class="pl-s3">FirstOrCreate</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE name = 'non_existing';</span>
<span class="pl-c">//// INSERT INTO "users" (name, age) VALUES ("non_existing", 20);</span>
<span class="pl-c">//// user -&gt; User{Id: 112, Name: "non_existing", Age: 20}</span>

<span class="pl-c">// Found</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>}).<span class="pl-s3">Attrs</span>(User{Age: <span class="pl-c1">30</span>}).<span class="pl-s3">FirstOrCreate</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE name = 'jinzhu';</span>
<span class="pl-c">//// user -&gt; User{Id: 111, Name: "jinzhu", Age: 20}</span></pre></div>

<h3>
<a id="user-content-assign-1" class="anchor" href="https://github.com/jinzhu/gorm#assign-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Assign</h3>

<p>Ignore some values when searching, but assign it to the record regardless it is found or not, then save back to database. like <code>FirstOrInit</code></p>

<div class="highlight highlight-go"><pre><span class="pl-c">// Unfound</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>non_existing<span class="pl-pds">"</span></span>}).<span class="pl-s3">Assign</span>(User{Age: <span class="pl-c1">20</span>}).<span class="pl-s3">FirstOrCreate</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE name = 'non_existing';</span>
<span class="pl-c">//// INSERT INTO "users" (name, age) VALUES ("non_existing", 20);</span>
<span class="pl-c">//// user -&gt; User{Id: 112, Name: "non_existing", Age: 20}</span>

<span class="pl-c">// Found</span>
db.<span class="pl-s3">Where</span>(User{Name: <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>}).<span class="pl-s3">Assign</span>(User{Age: <span class="pl-c1">30</span>}).<span class="pl-s3">FirstOrCreate</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE name = 'jinzhu';</span>
<span class="pl-c">//// UPDATE users SET age=30 WHERE id = 111;</span>
<span class="pl-c">//// user -&gt; User{Id: 111, Name: "jinzhu", Age: 30}</span></pre></div>

<h2>
<a id="user-content-select" class="anchor" href="https://github.com/jinzhu/gorm#select" aria-hidden="true"><span class="octicon octicon-link"></span></a>Select</h2>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>name, age<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT name, age FROM users;</span>

db.<span class="pl-s3">Select</span>([]<span class="pl-st">string</span>{<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>}).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT name, age FROM users;</span>

db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>).<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>COALESCE(age,?)<span class="pl-pds">"</span></span>, <span class="pl-c1">42</span>).<span class="pl-s3">Rows</span>()
<span class="pl-c">//// SELECT COALESCE(age,'42') FROM users;</span></pre></div>

<h2>
<a id="user-content-order" class="anchor" href="https://github.com/jinzhu/gorm#order" aria-hidden="true"><span class="octicon octicon-link"></span></a>Order</h2>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Order</span>(<span class="pl-s1"><span class="pl-pds">"</span>age desc, name<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users ORDER BY age desc, name;</span>

<span class="pl-c">// Multiple orders</span>
db.<span class="pl-s3">Order</span>(<span class="pl-s1"><span class="pl-pds">"</span>age desc<span class="pl-pds">"</span></span>).<span class="pl-s3">Order</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users ORDER BY age desc, name;</span>

<span class="pl-c">// ReOrder</span>
db.<span class="pl-s3">Order</span>(<span class="pl-s1"><span class="pl-pds">"</span>age desc<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users1).<span class="pl-s3">Order</span>(<span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>, <span class="pl-c1">true</span>).<span class="pl-s3">Find</span>(&amp;users2)
<span class="pl-c">//// SELECT * FROM users ORDER BY age desc; (users1)</span>
<span class="pl-c">//// SELECT * FROM users ORDER BY age; (users2)</span></pre></div>

<h2>
<a id="user-content-limit" class="anchor" href="https://github.com/jinzhu/gorm#limit" aria-hidden="true"><span class="octicon octicon-link"></span></a>Limit</h2>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Limit</span>(<span class="pl-c1">3</span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users LIMIT 3;</span>

<span class="pl-c">// Cancel limit condition with -1</span>
db.<span class="pl-s3">Limit</span>(<span class="pl-c1">10</span>).<span class="pl-s3">Find</span>(&amp;users1).<span class="pl-s3">Limit</span>(-<span class="pl-c1">1</span>).<span class="pl-s3">Find</span>(&amp;users2)
<span class="pl-c">//// SELECT * FROM users LIMIT 10; (users1)</span>
<span class="pl-c">//// SELECT * FROM users; (users2)</span></pre><iframe id="tmp_downloadhelper_iframe" style="display: none;"></iframe></div>

<h2>
<a id="user-content-offset" class="anchor" href="https://github.com/jinzhu/gorm#offset" aria-hidden="true"><span class="octicon octicon-link"></span></a>Offset</h2>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Offset</span>(<span class="pl-c1">3</span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">//// SELECT * FROM users OFFSET 3;</span>

<span class="pl-c">// Cancel offset condition with -1</span>
db.<span class="pl-s3">Offset</span>(<span class="pl-c1">10</span>).<span class="pl-s3">Find</span>(&amp;users1).<span class="pl-s3">Offset</span>(-<span class="pl-c1">1</span>).<span class="pl-s3">Find</span>(&amp;users2)
<span class="pl-c">//// SELECT * FROM users OFFSET 10; (users1)</span>
<span class="pl-c">//// SELECT * FROM users; (users2)</span></pre></div>

<h2>
<a id="user-content-count" class="anchor" href="https://github.com/jinzhu/gorm#count" aria-hidden="true"><span class="octicon octicon-link"></span></a>Count</h2>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Or</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu 2<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users).<span class="pl-s3">Count</span>(&amp;count)
<span class="pl-c">//// SELECT * from USERS WHERE name = 'jinzhu' OR name = 'jinzhu 2'; (users)</span>
<span class="pl-c">//// SELECT count(*) FROM users WHERE name = 'jinzhu' OR name = 'jinzhu 2'; (count)</span>

db.<span class="pl-s3">Model</span>(User{}).<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Count</span>(&amp;count)
<span class="pl-c">//// SELECT count(*) FROM users WHERE name = 'jinzhu'; (count)</span>

db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>deleted_users<span class="pl-pds">"</span></span>).<span class="pl-s3">Count</span>(&amp;count)
<span class="pl-c">//// SELECT count(*) FROM deleted_users;</span></pre></div>

<h2>
<a id="user-content-pluck" class="anchor" href="https://github.com/jinzhu/gorm#pluck" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pluck</h2>

<p>Get selected attributes as map</p>

<div class="highlight highlight-go"><pre><span class="pl-k">var</span> <span class="pl-vo">ages</span> []<span class="pl-st">int64</span>
db.<span class="pl-s3">Find</span>(&amp;users).<span class="pl-s3">Pluck</span>(<span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>, &amp;ages)

<span class="pl-k">var</span> <span class="pl-vo">names</span> []<span class="pl-st">string</span>
db.<span class="pl-s3">Model</span>(&amp;User{}).<span class="pl-s3">Pluck</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, &amp;names)

db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>deleted_users<span class="pl-pds">"</span></span>).<span class="pl-s3">Pluck</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, &amp;names)

<span class="pl-c">// Requesting more than one column? Do it like this:</span>
db.<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>name, age<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users)</pre></div>

<h2>
<a id="user-content-raw-sql" class="anchor" href="https://github.com/jinzhu/gorm#raw-sql" aria-hidden="true"><span class="octicon octicon-link"></span></a>Raw SQL</h2>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Exec</span>(<span class="pl-s1"><span class="pl-pds">"</span>DROP TABLE users;<span class="pl-pds">"</span></span>)
db.<span class="pl-s3">Exec</span>(<span class="pl-s1"><span class="pl-pds">"</span>UPDATE orders SET shipped_at=? WHERE id IN (?)<span class="pl-pds">"</span></span>, time.<span class="pl-vo">Now</span>, []<span class="pl-st">int64</span>{<span class="pl-c1">11</span>,<span class="pl-c1">22</span>,<span class="pl-c1">33</span>})</pre></div>

<h2>
<a id="user-content-row--rows" class="anchor" href="https://github.com/jinzhu/gorm#row--rows" aria-hidden="true"><span class="octicon octicon-link"></span></a>Row &amp; Rows</h2>

<p>It is even possible to get query result as <code>*sql.Row</code> or <code>*sql.Rows</code></p>

<div class="highlight highlight-go"><pre><span class="pl-vo">row</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>).<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>name, age<span class="pl-pds">"</span></span>).<span class="pl-s3">Row</span>() <span class="pl-c">// (*sql.Row)</span>
row.<span class="pl-s3">Scan</span>(&amp;name, &amp;age)

<span class="pl-vo">rows</span>, <span class="pl-vo">err</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Model</span>(User{}).<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>name, age, email<span class="pl-pds">"</span></span>).<span class="pl-s3">Rows</span>() <span class="pl-c">// (*sql.Rows, error)</span>
<span class="pl-k">defer</span> rows.<span class="pl-s3">Close</span>()
<span class="pl-k">for</span> rows.<span class="pl-s3">Next</span>() {
    ...
    rows.<span class="pl-s3">Scan</span>(&amp;name, &amp;age, &amp;email)
    ...
}

<span class="pl-c">// Raw SQL</span>
<span class="pl-vo">rows</span>, <span class="pl-vo">err</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Raw</span>(<span class="pl-s1"><span class="pl-pds">"</span>select name, age, email from users where name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Rows</span>() <span class="pl-c">// (*sql.Rows, error)</span>
<span class="pl-k">defer</span> rows.<span class="pl-s3">Close</span>()
<span class="pl-k">for</span> rows.<span class="pl-s3">Next</span>() {
    ...
    rows.<span class="pl-s3">Scan</span>(&amp;name, &amp;age, &amp;email)
    ...
}</pre></div>

<h2>
<a id="user-content-scan" class="anchor" href="https://github.com/jinzhu/gorm#scan" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scan</h2>

<p>Scan results into another struct.</p>

<div class="highlight highlight-go"><pre><span class="pl-k">type</span> <span class="pl-v">Result</span> <span class="pl-st">struct</span> {
    <span class="pl-v">Name</span> <span class="pl-st">string</span>
    <span class="pl-v">Age</span>  <span class="pl-st">int</span>
}

<span class="pl-k">var</span> <span class="pl-vo">result</span> <span class="pl-v">Result</span>
db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>).<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>name, age<span class="pl-pds">"</span></span>).<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>).<span class="pl-s3">Scan</span>(&amp;result)

<span class="pl-c">// Raw SQL</span>
db.<span class="pl-s3">Raw</span>(<span class="pl-s1"><span class="pl-pds">"</span>SELECT name, age FROM users WHERE name = ?<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>).<span class="pl-s3">Scan</span>(&amp;result)</pre></div>

<h2>
<a id="user-content-group--having" class="anchor" href="https://github.com/jinzhu/gorm#group--having" aria-hidden="true"><span class="octicon octicon-link"></span></a>Group &amp; Having</h2>

<div class="highlight highlight-go"><pre><span class="pl-vo">rows</span>, <span class="pl-vo">err</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>orders<span class="pl-pds">"</span></span>).<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>date(created_at) as date, sum(amount) as total<span class="pl-pds">"</span></span>).<span class="pl-s3">Group</span>(<span class="pl-s1"><span class="pl-pds">"</span>date(created_at)<span class="pl-pds">"</span></span>).<span class="pl-s3">Rows</span>()
<span class="pl-k">for</span> rows.<span class="pl-s3">Next</span>() {
    ...
}

<span class="pl-vo">rows</span>, <span class="pl-vo">err</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>orders<span class="pl-pds">"</span></span>).<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>date(created_at) as date, sum(amount) as total<span class="pl-pds">"</span></span>).<span class="pl-s3">Group</span>(<span class="pl-s1"><span class="pl-pds">"</span>date(created_at)<span class="pl-pds">"</span></span>).<span class="pl-s3">Having</span>(<span class="pl-s1"><span class="pl-pds">"</span>sum(amount) &gt; ?<span class="pl-pds">"</span></span>, <span class="pl-c1">100</span>).<span class="pl-s3">Rows</span>()
<span class="pl-k">for</span> rows.<span class="pl-s3">Next</span>() {
    ...
}

<span class="pl-k">type</span> <span class="pl-v">Result</span> <span class="pl-st">struct</span> {
    <span class="pl-v">Date</span>  time.<span class="pl-vo">Time</span>
    <span class="pl-v">Total</span> <span class="pl-st">int64</span>
}
db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>orders<span class="pl-pds">"</span></span>).<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>date(created_at) as date, sum(amount) as total<span class="pl-pds">"</span></span>).<span class="pl-s3">Group</span>(<span class="pl-s1"><span class="pl-pds">"</span>date(created_at)<span class="pl-pds">"</span></span>).<span class="pl-s3">Having</span>(<span class="pl-s1"><span class="pl-pds">"</span>sum(amount) &gt; ?<span class="pl-pds">"</span></span>, <span class="pl-c1">100</span>).<span class="pl-s3">Scan</span>(&amp;results)</pre></div>

<h2>
<a id="user-content-joins" class="anchor" href="https://github.com/jinzhu/gorm#joins" aria-hidden="true"><span class="octicon octicon-link"></span></a>Joins</h2>

<div class="highlight highlight-go"><pre><span class="pl-vo">rows</span>, <span class="pl-vo">err</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>).<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>users.name, emails.email<span class="pl-pds">"</span></span>).<span class="pl-s3">Joins</span>(<span class="pl-s1"><span class="pl-pds">"</span>left join emails on emails.user_id = users.id<span class="pl-pds">"</span></span>).<span class="pl-s3">Rows</span>()
<span class="pl-k">for</span> rows.<span class="pl-s3">Next</span>() {
    ...
}

db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>).<span class="pl-s3">Select</span>(<span class="pl-s1"><span class="pl-pds">"</span>users.name, emails.email<span class="pl-pds">"</span></span>).<span class="pl-s3">Joins</span>(<span class="pl-s1"><span class="pl-pds">"</span>left join emails on emails.user_id = users.id<span class="pl-pds">"</span></span>).<span class="pl-s3">Scan</span>(&amp;results)</pre></div>

<h2>
<a id="user-content-transactions" class="anchor" href="https://github.com/jinzhu/gorm#transactions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transactions</h2>

<p>All individual save and delete operations are run in a transaction by default.</p>

<div class="highlight highlight-go"><pre><span class="pl-c">// begin</span>
<span class="pl-vo">tx</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Begin</span>()

<span class="pl-c">// rollback</span>
tx.<span class="pl-s3">Rollback</span>()

<span class="pl-c">// commit</span>
tx.<span class="pl-s3">Commit</span>()</pre></div>

<h2>
<a id="user-content-scopes" class="anchor" href="https://github.com/jinzhu/gorm#scopes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scopes</h2>

<div class="highlight highlight-go"><pre><span class="pl-k">func</span> <span class="pl-en">AmountGreaterThan1000</span>(<span class="pl-v">db</span> *<span class="pl-v">gorm</span>.<span class="pl-v">DB</span>) *<span class="pl-v">gorm</span>.<span class="pl-v">DB</span> {
    <span class="pl-k">return</span> db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>amount &gt; ?<span class="pl-pds">"</span></span>, <span class="pl-c1">1000</span>)
}

<span class="pl-k">func</span> <span class="pl-en">PaidWithCreditCard</span>(<span class="pl-v">db</span> *<span class="pl-v">gorm</span>.<span class="pl-v">DB</span>) *<span class="pl-v">gorm</span>.<span class="pl-v">DB</span> {
    <span class="pl-k">return</span> db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>pay_mode_sign = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>C<span class="pl-pds">"</span></span>)
}

<span class="pl-k">func</span> <span class="pl-en">PaidWithCod</span>(<span class="pl-v">db</span> *<span class="pl-v">gorm</span>.<span class="pl-v">DB</span>) *<span class="pl-v">gorm</span>.<span class="pl-v">DB</span> {
    <span class="pl-k">return</span> db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>pay_mode_sign = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>C<span class="pl-pds">"</span></span>)
}

<span class="pl-k">func</span> <span class="pl-en">OrderStatus</span>(<span class="pl-v">status</span> []<span class="pl-v">string</span>) <span class="pl-v">func</span> (db *gorm.DB) *gorm.DB {
    <span class="pl-k">return</span> <span class="pl-s3">func</span> (db *gorm.<span class="pl-vo">DB</span>) *gorm.<span class="pl-vo">DB</span> {
        <span class="pl-k">return</span> db.<span class="pl-s3">Scopes</span>(AmountGreaterThan1000).<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>status in (?)<span class="pl-pds">"</span></span>, status)
    }
}

db.<span class="pl-s3">Scopes</span>(AmountGreaterThan1000, <span class="pl-v">PaidWithCreditCard</span>).<span class="pl-s3">Find</span>(&amp;orders)
<span class="pl-c">// Find all credit card orders and amount greater than 1000</span>

db.<span class="pl-s3">Scopes</span>(AmountGreaterThan1000, <span class="pl-v">PaidWithCod</span>).<span class="pl-s3">Find</span>(&amp;orders)
<span class="pl-c">// Find all COD orders and amount greater than 1000</span>

db.<span class="pl-s3">Scopes</span>(<span class="pl-s3">OrderStatus</span>([]<span class="pl-st">string</span>{<span class="pl-s1"><span class="pl-pds">"</span>paid<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>shipped<span class="pl-pds">"</span></span>})).<span class="pl-s3">Find</span>(&amp;orders)
<span class="pl-c">// Find all paid, shipped orders</span></pre></div>

<h2>
<a id="user-content-callbacks" class="anchor" href="https://github.com/jinzhu/gorm#callbacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Callbacks</h2>

<p>Callbacks are methods defined on the pointer of struct.
If any callback returns an error, gorm will stop future operations and rollback all changes.</p>

<p>Here is the list of all available callbacks:
(listed in the same order in which they will get called during the respective operations)</p>

<h3>
<a id="user-content-creating-an-object" class="anchor" href="https://github.com/jinzhu/gorm#creating-an-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating An Object</h3>

<div class="highlight highlight-go"><pre>BeforeSave
BeforeCreate
<span class="pl-c">// save before associations</span>
<span class="pl-c">// save self</span>
<span class="pl-c">// save after associations</span>
AfterCreate
AfterSave</pre></div>

<h3>
<a id="user-content-updating-an-object" class="anchor" href="https://github.com/jinzhu/gorm#updating-an-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Updating An Object</h3>

<div class="highlight highlight-go"><pre>BeforeSave
BeforeUpdate
<span class="pl-c">// save before associations</span>
<span class="pl-c">// save self</span>
<span class="pl-c">// save after associations</span>
AfterUpdate
AfterSave</pre></div>

<h3>
<a id="user-content-destroying-an-object" class="anchor" href="https://github.com/jinzhu/gorm#destroying-an-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Destroying An Object</h3>

<div class="highlight highlight-go"><pre>BeforeDelete
<span class="pl-c">// delete self</span>
AfterDelete</pre></div>

<h3>
<a id="user-content-after-find" class="anchor" href="https://github.com/jinzhu/gorm#after-find" aria-hidden="true"><span class="octicon octicon-link"></span></a>After Find</h3>

<div class="highlight highlight-go"><pre><span class="pl-c">// load data from database</span>
AfterFind</pre></div>

<h3>
<a id="user-content-example" class="anchor" href="https://github.com/jinzhu/gorm#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h3>

<div class="highlight highlight-go"><pre><span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">u</span> *<span class="pl-v">User</span>) <span class="pl-en">BeforeUpdate</span></span>() (<span class="pl-v">err</span> <span class="pl-v">error</span>) {
    <span class="pl-k">if</span> u.<span class="pl-s3">readonly</span>() {
        err = errors.<span class="pl-s3">New</span>(<span class="pl-s1"><span class="pl-pds">"</span>read only user<span class="pl-pds">"</span></span>)
    }
    <span class="pl-k">return</span>
}

<span class="pl-c">// Rollback the insertion if user's id greater than 1000</span>
<span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">u</span> *<span class="pl-v">User</span>) <span class="pl-en">AfterCreate</span></span>() (<span class="pl-v">err</span> <span class="pl-v">error</span>) {
    <span class="pl-k">if</span> (u.<span class="pl-vo">Id</span> &gt; <span class="pl-c1">1000</span>) {
        err = errors.<span class="pl-s3">New</span>(<span class="pl-s1"><span class="pl-pds">"</span>user id is already greater than 1000<span class="pl-pds">"</span></span>)
    }
    <span class="pl-k">return</span>
}</pre></div>

<p>As you know, save/delete operations in gorm are running in a transaction,
This is means if changes made in the transaction is not visiable unless it is commited,
So if you want to use those changes in your callbacks, you need to run SQL in same transaction.
Fortunately, gorm support pass transaction to callbacks as you needed, you could do it like this:</p>

<div class="highlight highlight-go"><pre><span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">u</span> *<span class="pl-v">User</span>) <span class="pl-en">AfterCreate</span></span>(<span class="pl-v">tx</span> *<span class="pl-v">gorm</span>.<span class="pl-v">DB</span>) (<span class="pl-v">err</span> <span class="pl-v">error</span>) {
    tx.<span class="pl-s3">Model</span>(u).<span class="pl-s3">Update</span>(<span class="pl-s1"><span class="pl-pds">"</span>role<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>admin<span class="pl-pds">"</span></span>)
    <span class="pl-k">return</span>
}</pre></div>

<h2>
<a id="user-content-specifying-the-table-name" class="anchor" href="https://github.com/jinzhu/gorm#specifying-the-table-name" aria-hidden="true"><span class="octicon octicon-link"></span></a>Specifying The Table Name</h2>

<div class="highlight highlight-go"><pre><span class="pl-c">// Create `deleted_users` table with struct User's definition</span>
db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>deleted_users<span class="pl-pds">"</span></span>).<span class="pl-s3">CreateTable</span>(&amp;User{})

<span class="pl-k">var</span> <span class="pl-vo">deleted_users</span> []<span class="pl-v">User</span>
db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>deleted_users<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;deleted_users)
<span class="pl-c">//// SELECT * FROM deleted_users;</span>

db.<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>deleted_users<span class="pl-pds">"</span></span>).<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">Delete</span>()
<span class="pl-c">//// DELETE FROM deleted_users WHERE name = 'jinzhu';</span></pre></div>

<h3>
<a id="user-content-specifying-the-table-name-for-a-struct-permanently-with-tablename" class="anchor" href="https://github.com/jinzhu/gorm#specifying-the-table-name-for-a-struct-permanently-with-tablename" aria-hidden="true"><span class="octicon octicon-link"></span></a>Specifying The Table Name For A Struct Permanently with TableName</h3>

<div class="highlight highlight-go"><pre><span class="pl-k">type</span> <span class="pl-v">Cart</span> <span class="pl-st">struct</span> {
}

<span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">c</span> <span class="pl-v">Cart</span>) <span class="pl-en">TableName</span></span>() <span class="pl-v">string</span> {
    <span class="pl-k">return</span> <span class="pl-s1"><span class="pl-pds">"</span>shopping_cart<span class="pl-pds">"</span></span>
}

<span class="pl-k">func</span> <span class="pl-en">(<span class="pl-v">u</span> <span class="pl-v">User</span>) <span class="pl-en">TableName</span></span>() <span class="pl-v">string</span> {
    <span class="pl-k">if</span> u.<span class="pl-vo">Role</span> == <span class="pl-s1"><span class="pl-pds">"</span>admin<span class="pl-pds">"</span></span> {
        <span class="pl-k">return</span> <span class="pl-s1"><span class="pl-pds">"</span>admin_users<span class="pl-pds">"</span></span>
    } <span class="pl-k">else</span> {
        <span class="pl-k">return</span> <span class="pl-s1"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>
    }
}</pre></div>

<h2>
<a id="user-content-error-handling" class="anchor" href="https://github.com/jinzhu/gorm#error-handling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Error Handling</h2>

<div class="highlight highlight-go"><pre><span class="pl-vo">query</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;user)
<span class="pl-vo">query</span> <span class="pl-k">:=</span> db.<span class="pl-s3">First</span>(&amp;user).<span class="pl-s3">Limit</span>(<span class="pl-c1">10</span>).<span class="pl-s3">Find</span>(&amp;users)
<span class="pl-c">// query.Error will return the last happened error</span>

<span class="pl-c">// So you could do error handing in your application like this:</span>
<span class="pl-k">if</span> <span class="pl-vo">err</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;user).<span class="pl-vo">Error</span>; err != <span class="pl-c1">nil</span> {
    <span class="pl-c">// error handling...</span>
}

<span class="pl-c">// RecordNotFound</span>
<span class="pl-c">// If no record found when you query data, gorm will return RecordNotFound error, you could check it like this:</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;User{}).<span class="pl-vo">Error</span> == gorm.<span class="pl-vo">RecordNotFound</span>
<span class="pl-c">// Or use the shortcut method</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;user).<span class="pl-s3">RecordNotFound</span>()

<span class="pl-k">if</span> db.<span class="pl-s3">Model</span>(&amp;user).<span class="pl-s3">Related</span>(&amp;credit_card).<span class="pl-s3">RecordNotFound</span>() {
    <span class="pl-c">// no credit card found error handling</span>
}</pre></div>

<h2>
<a id="user-content-logger" class="anchor" href="https://github.com/jinzhu/gorm#logger" aria-hidden="true"><span class="octicon octicon-link"></span></a>Logger</h2>

<p>Gorm has built-in logger support</p>

<div class="highlight highlight-go"><pre><span class="pl-c">// Enable Logger</span>
db.<span class="pl-s3">LogMode</span>(<span class="pl-c1">true</span>)

<span class="pl-c">// Diable Logger</span>
db.<span class="pl-s3">LogMode</span>(<span class="pl-c1">false</span>)

<span class="pl-c">// Debug a single operation</span>
db.<span class="pl-s3">Debug</span>().<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>jinzhu<span class="pl-pds">"</span></span>).<span class="pl-s3">First</span>(&amp;User{})</pre></div>

<p><a href="./jinzhu gorm_files/68747470733a2f2f7261772e6769746875622e636f6d2f6a696e7a68752f676f726d2f6d61737465722f696d616765732f6c6f676765722e706e67" target="_blank"><img src="./jinzhu gorm_files/68747470733a2f2f7261772e6769746875622e636f6d2f6a696e7a68752f676f726d2f6d61737465722f696d616765732f6c6f676765722e706e67" alt="logger" data-canonical-src="https://raw.github.com/jinzhu/gorm/master/images/logger.png" style="max-width:100%;"></a></p>

<h3>
<a id="user-content-customize-logger" class="anchor" href="https://github.com/jinzhu/gorm#customize-logger" aria-hidden="true"><span class="octicon octicon-link"></span></a>Customize Logger</h3>

<div class="highlight highlight-go"><pre><span class="pl-c">// Refer gorm's default logger for how to: https://github.com/jinzhu/gorm/blob/master/logger.go#files</span>
db.<span class="pl-s3">SetLogger</span>(gorm.<span class="pl-vo">Logger</span>{revel.<span class="pl-vo">TRACE</span>})
db.<span class="pl-s3">SetLogger</span>(log.<span class="pl-s3">New</span>(os.<span class="pl-vo">Stdout</span>, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\r\n</span><span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>))</pre></div>

<h2>
<a id="user-content-existing-schema" class="anchor" href="https://github.com/jinzhu/gorm#existing-schema" aria-hidden="true"><span class="octicon octicon-link"></span></a>Existing Schema</h2>

<p>If you have an existing database schema, and the primary key field is different from <code>id</code>, you can add a tag to the field structure to specify that this field is a primary key.</p>

<div class="highlight highlight-go"><pre><span class="pl-k">type</span> <span class="pl-v">Animal</span> <span class="pl-st">struct</span> {
    <span class="pl-v">AnimalId</span>     <span class="pl-st">int64</span> <span class="pl-s1"><span class="pl-pds">`</span>gorm:"primary_key:yes"<span class="pl-pds">`</span></span>
    <span class="pl-v">Birthday</span>     time.<span class="pl-vo">Time</span> <span class="pl-s1"><span class="pl-pds">`</span>sql:"DEFAULT:current_timestamp"<span class="pl-pds">`</span></span>
    <span class="pl-v">Name</span>         <span class="pl-st">string</span> <span class="pl-s1"><span class="pl-pds">`</span>sql:"default:'galeone'"<span class="pl-pds">`</span></span>
    <span class="pl-v">Age</span>          <span class="pl-st">int64</span>
}</pre></div>

<p>If your column names differ from the struct fields, you can specify them like this:</p>

<div class="highlight highlight-go"><pre><span class="pl-k">type</span> <span class="pl-v">Animal</span> <span class="pl-st">struct</span> {
    <span class="pl-v">AnimalId</span>    <span class="pl-st">int64</span>     <span class="pl-s1"><span class="pl-pds">`</span>gorm:"column:beast_id; primary_key:yes"<span class="pl-pds">`</span></span>
    <span class="pl-v">Birthday</span>    time.<span class="pl-vo">Time</span> <span class="pl-s1"><span class="pl-pds">`</span>gorm:"column:day_of_the_beast"<span class="pl-pds">`</span></span>
    <span class="pl-v">Age</span>         <span class="pl-st">int64</span>     <span class="pl-s1"><span class="pl-pds">`</span>gorm:"column:age_of_the_beast"<span class="pl-pds">`</span></span>
}</pre></div>

<h2>
<a id="user-content-default-values" class="anchor" href="https://github.com/jinzhu/gorm#default-values" aria-hidden="true"><span class="octicon octicon-link"></span></a>Default values</h2>

<p>If you have defined a default value in the <code>sql</code> tag (see the struct Animal above) the generated create/update SQl will ignore these fields if is set blank data.</p>

<p>Eg.</p>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">Create</span>(&amp;Animal{Age: <span class="pl-c1">99</span>, <span class="pl-v">Name</span>: <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>})</pre></div>

<p>The generated query will be:</p>

<div class="highlight highlight-sql"><pre><span class="pl-k">INSERT INTO</span> animals(<span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>) <span class="pl-k">values</span>(<span class="pl-s1"><span class="pl-pds">'</span>99<span class="pl-pds">'</span></span>);</pre></div>

<p>The same thing occurs in update statements.</p>

<h2>
<a id="user-content-more-examples-with-query-chain" class="anchor" href="https://github.com/jinzhu/gorm#more-examples-with-query-chain" aria-hidden="true"><span class="octicon octicon-link"></span></a>More examples with query chain</h2>

<div class="highlight highlight-go"><pre>db.<span class="pl-s3">First</span>(&amp;first_article).<span class="pl-s3">Count</span>(&amp;total_count).<span class="pl-s3">Limit</span>(<span class="pl-c1">10</span>).<span class="pl-s3">Find</span>(&amp;first_page_articles).<span class="pl-s3">Offset</span>(<span class="pl-c1">10</span>).<span class="pl-s3">Find</span>(&amp;second_page_articles)
<span class="pl-c">//// SELECT * FROM articles LIMIT 1; (first_article)</span>
<span class="pl-c">//// SELECT count(*) FROM articles; (total_count)</span>
<span class="pl-c">//// SELECT * FROM articles LIMIT 10; (first_page_articles)</span>
<span class="pl-c">//// SELECT * FROM articles LIMIT 10 OFFSET 10; (second_page_articles)</span>


db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>created_at &gt; ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>2013-10-10<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;cancelled_orders, <span class="pl-s1"><span class="pl-pds">"</span>state = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>cancelled<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;shipped_orders, <span class="pl-s1"><span class="pl-pds">"</span>state = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>shipped<span class="pl-pds">"</span></span>)
<span class="pl-c">//// SELECT * FROM orders WHERE created_at &gt; '2013/10/10' AND state = 'cancelled'; (cancelled_orders)</span>
<span class="pl-c">//// SELECT * FROM orders WHERE created_at &gt; '2013/10/10' AND state = 'shipped'; (shipped_orders)</span>


<span class="pl-c">// Use variables to keep query chain</span>
<span class="pl-vo">todays_orders</span> <span class="pl-k">:=</span> db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>created_at &gt; ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>2013-10-29<span class="pl-pds">"</span></span>)
<span class="pl-vo">cancelled_orders</span> <span class="pl-k">:=</span> todays_orders.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>state = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>cancelled<span class="pl-pds">"</span></span>)
<span class="pl-vo">shipped_orders</span> <span class="pl-k">:=</span> todays_orders.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>state = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>shipped<span class="pl-pds">"</span></span>)


<span class="pl-c">// Search with shared conditions for different tables</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>product_name = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>fancy_product<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;orders).<span class="pl-s3">Find</span>(&amp;shopping_carts)
<span class="pl-c">//// SELECT * FROM orders WHERE product_name = 'fancy_product'; (orders)</span>
<span class="pl-c">//// SELECT * FROM carts WHERE product_name = 'fancy_product'; (shopping_carts)</span>


<span class="pl-c">// Search with shared conditions from different tables with specified table</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>mail_type = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>TEXT<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users1).<span class="pl-s3">Table</span>(<span class="pl-s1"><span class="pl-pds">"</span>deleted_users<span class="pl-pds">"</span></span>).<span class="pl-s3">Find</span>(&amp;users2)
<span class="pl-c">//// SELECT * FROM users WHERE mail_type = 'TEXT'; (users1)</span>
<span class="pl-c">//// SELECT * FROM deleted_users WHERE mail_type = 'TEXT'; (users2)</span>


<span class="pl-c">// FirstOrCreate example</span>
db.<span class="pl-s3">Where</span>(<span class="pl-s1"><span class="pl-pds">"</span>email = ?<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>x@example.org<span class="pl-pds">"</span></span>).<span class="pl-s3">Attrs</span>(User{RegisteredIp: <span class="pl-s1"><span class="pl-pds">"</span>111.111.111.111<span class="pl-pds">"</span></span>}).<span class="pl-s3">FirstOrCreate</span>(&amp;user)
<span class="pl-c">//// SELECT * FROM users WHERE email = 'x@example.org';</span>
<span class="pl-c">//// INSERT INTO "users" (email,registered_ip) VALUES ("x@example.org", "111.111.111.111")  // if record not found</span></pre></div>

<h2>
<a id="user-content-todo" class="anchor" href="https://github.com/jinzhu/gorm#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul class="task-list">
<li>db.RegisterFuncation("Search", func() {})
db.Model(&amp;[]User{}).Limit(10).Do("Search", "search func's argument")
db.Mode(&amp;User{}).Do("EditForm").Get("edit_form_html")
DefaultTimeZone, R/W Splitting, Validation</li>
<li>Github Pages</li>
<li>Includes</li>
<li>AlertColumn, DropColumn</li>
</ul>

<h1>
<a id="user-content-author" class="anchor" href="https://github.com/jinzhu/gorm#author" aria-hidden="true"><span class="octicon octicon-link"></span></a>Author</h1>

<p><strong>jinzhu</strong></p>

<ul class="task-list">
<li><a href="http://github.com/jinzhu">http://github.com/jinzhu</a></li>
<li><a href="mailto:wosmvp@gmail.com">wosmvp@gmail.com</a></li>
<li><a href="http://twitter.com/zhangjinzhu">http://twitter.com/zhangjinzhu</a></li>
</ul>

<h2>
<a id="user-content-license" class="anchor" href="https://github.com/jinzhu/gorm#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Released under the <a href="https://github.com/jinzhu/gorm/blob/master/License">MIT License</a>.</p>

<p><a href="http://godoc.org/github.com/jinzhu/gorm"><img src="./jinzhu gorm_files/68747470733a2f2f676f646f632e6f72672f6769746875622e636f6d2f6a696e7a68752f676f726d3f7374617475732e706e67" alt="GoDoc" data-canonical-src="https://godoc.org/github.com/jinzhu/gorm?status.png" style="max-width:100%;"></a></p>
</article>
  </div>


        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="https://developer.github.com/">API</a></li>
      <li><a href="http://training.github.com/">Training</a></li>
      <li><a href="http://shop.github.com/">Shop</a></li>
      <li><a href="https://github.com/blog">Blog</a></li>
      <li><a href="https://github.com/about">About</a></li>

    </ul>

    <a href="https://github.com/" aria-label="Homepage">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
    </a>

    <ul class="site-footer-links">
      <li>© 2015 <span title="0.11394s from github-fe123-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy">Privacy</a></li>
        <li><a href="https://github.com/security">Security</a></li>
        <li><a href="https://github.com/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-suggester-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder=""></textarea>
      <div class="suggester-container">
        <div class="suggester fullscreen-suggester js-suggester js-navigation-container"></div>
      </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="https://github.com/jinzhu/gorm#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="https://github.com/jinzhu/gorm#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w" aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="https://github.com/jinzhu/gorm#" class="octicon octicon-x flash-close js-ajax-error-dismiss" aria-label="Dismiss error"></a>
      Something went wrong with that request. Please try again.
    </div>


      <script crossorigin="anonymous" src="./jinzhu gorm_files/frameworks-87b2616c03e3e9e84d9d17109410789222438c5b882d9b62aec5b0f17f3adbbb.js" type="text/javascript"></script>
      <script async="async" crossorigin="anonymous" src="./jinzhu gorm_files/github-9d0bcb5318d0cbbf400e11413dbcdad89094a401401de5ce750a2a978ab6c46f.js" type="text/javascript"></script>
      
      
  


<script type="text/javascript" charset="utf-8" id="ABD75F83F0359849_Analytics" src="http://tajs.qq.com/stats?sId=26628622"></script><div id="global-zeroclipboard-html-bridge" class="global-zeroclipboard-container" aria-label="Copy to clipboard" style="position: absolute; left: 0px; top: 1px; width: 1px; height: 25.142858505249px; z-index: 999999999;"><object id="global-zeroclipboard-flash-bridge" name="global-zeroclipboard-flash-bridge" width="100%" height="100%" type="application/x-shockwave-flash" data="https://assets-cdn.github.com/flash/ZeroClipboard.v2.1.6.swf"><param name="allowScriptAccess" value="always"><param name="allowNetworking" value="all"><param name="menu" value="false"><param name="wmode" value="transparent"><param name="flashvars" value="trustedOrigins=github.com%2C%2F%2Fgithub.com%2Chttps%3A%2F%2Fgithub.com&amp;swfObjectId=global-zeroclipboard-flash-bridge"></object></div></body></html>